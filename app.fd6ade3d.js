(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+3o9":function(t,e,n){n("5wds"),n("5wds");(function(){this.InputHandler=function(){function t(){}return t.CANCEL="cancel",t.SUBMIT="submit",t.KEY_ENTER=13,t.KEY_ESC=27,t.textarea=function(e){return function(n){var i;return n.keyCode===t.KEY_ESC?i=t.CANCEL:n.keyCode===t.KEY_ENTER&&!n.shiftKey&&osu.isDesktop()&&(n.preventDefault(),i=t.SUBMIT),"function"==typeof e?e(i,n):void 0}},t}()}).call(window)},"+CAb":function(t,e,n){"use strict";var i=n("0h6b"),s=n("EaLk"),r=n("cF9b"),o=n("JlDh"),a=n("h/Ip"),u=n("6QPw"),l=n("FiYg"),c=n("9zVE"),h=n("f4vq"),d=n("/G9H"),p=n("Ncbg"),f=n("KMrT"),m=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};let g=class extends d.Component{constructor(){var t;super(...arguments),this.state={hasError:!1},this.controller=new l.a(h.a.dataStore.notificationStore,{excludes:this.props.excludes,isWidget:!0},null!==(t=this.props.only)&&void 0!==t?t:null),this.typeNames=o.c.filter(t=>!this.props.excludes.includes(t)),this.handleFilterClick=t=>{var e;const n=null!==(e=t.currentTarget.dataset.type)&&void 0!==e?e:null;this.controller.navigateTo(n)},this.handleMarkAsRead=()=>{this.controller.markCurrentTypeAsRead()},this.handleShowMore=()=>{this.controller.loadMore()},this.renderFilter=t=>{const e=this.controller.getType(t.type),n=t.type===this.controller.currentFilter;if(null!==e.name&&e.isEmpty&&!n)return null;const i={"data-type":t.type},s=n?["active"]:[];return d.createElement("button",Object.assign({key:t.title,className:osu.classWithModifiers("notification-popup__filter",s),onClick:this.handleFilterClick},i),d.createElement("span",{className:"notification-popup__filter-count"},this.controller.getTotal(e)),d.createElement("span",null,t.title))}}get links(){return this.typeNames.map(t=>({title:osu.trans(`notifications.filters.${null!=t?t:"_"}`),type:t}))}static getDerivedStateFromError(t){return console.error(t),{hasError:!0}}render(){var t;const e=`notification-popup u-fancy-scrollbar ${null!==(t=this.props.extraClasses)&&void 0!==t?t:""}`;return d.createElement(a.a.Provider,{value:{excludes:this.props.excludes,isWidget:!0}},d.createElement("div",{className:e},d.createElement("div",{className:"notification-popup__scroll-container"},this.renderFilters(),d.createElement("div",{className:"notification-popup__buttons"},this.renderHistoryLink(),d.createElement("div",{className:"notification-popup__clear-button"},this.renderMarkAsReadButton())),this.renderLegacyPm(),d.createElement("div",{className:"notification-stacks"},this.renderStacks(),this.renderShowMore()))))}renderFilters(){return null==this.props.only&&h.a.notificationsWorker.hasData?d.createElement("div",{className:"notification-popup__filters"},this.links.map(this.renderFilter)):null}renderHistoryLink(){var t;const e="channel"===this.props.only?"chat.index":"notifications.index";return d.createElement("a",{className:"notification-popup__filter",href:Object(i.route)(e)},osu.trans(`notifications.see_${null!==(t=this.props.only)&&void 0!==t?t:"all"}`))}renderLegacyPm(){if(null==this.controller.currentFilter)return d.createElement(u.a,null)}renderMarkAsReadButton(){var t;const e=this.controller.type;return e.isEmpty?null:d.createElement(c.a,{isMarkingAsRead:e.isMarkingAsRead,onMarkAsRead:this.handleMarkAsRead,text:osu.trans("notifications.mark_read",{type:osu.trans(`notifications.filters.${null!==(t=e.name)&&void 0!==t?t:"_"}`)})})}renderShowMore(){const t=this.controller.type;return d.createElement(p.a,{callback:this.handleShowMore,hasMore:null==t?void 0:t.hasMore,loading:null==t?void 0:t.isLoading,modifiers:["notification-group","notification-list"]})}renderStacks(){if(this.state.hasError)return;const t=this.controller.stacks.map(t=>d.createElement(f.a,{key:t.id,stack:t}));if(0===t.length){let t="notifications.loading";return h.a.notificationsWorker.hasData?t=null==this.controller.currentFilter?"notifications.all_read":"notifications.none":h.a.notificationsWorker.waitingVerification&&(t="notifications.verifying"),d.createElement("p",{key:"empty",className:"notification-popup__empty"},osu.trans(t))}return t}};g.defaultProps={excludes:[]},m([s.e],g.prototype,"links",null),g=m([r.e],g),e.a=g},0:function(t,e,n){n("QDFN"),t.exports=n("zzf1")},"0tzJ":function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BeatmapsetDownloadObserver=function(){function e(){this.showPopup=t(this.showPopup,this),this.createPopup=t(this.createPopup,this),this.loadAndShowPopup=t(this.loadAndShowPopup,this),this.quotaCheck=t(this.quotaCheck,this),i(document).on("click mouseup",".js-beatmapset-download-link",this.quotaCheck)}return e.prototype.targetSelector=".support-osu-popup",e.prototype.container="#popup-container",e.prototype.wrapperClass="empty-popup",e.prototype.quotaCheck=function(t){var e;if(("undefined"==typeof currentUser||null===currentUser||!currentUser.is_supporter)&&("mouseup"!==t.type||2===t.which))return i.ajax(laroute.route("download-quota-check")).done((e=this,function(t){var n;if(20===(n=t.quota_used)||n>0&&n%50==0)return e.loadAndShowPopup}))},e.prototype.loadAndShowPopup=function(){return 0===i(this.targetSelector).length?i.get(laroute.route("support-osu-popup"),(t=this,function(e){return t.createPopup(e),t.showPopup()})):this.showPopup();var t},e.prototype.createPopup=function(t){var e;if(void 0!==t)return(e=i("."+this.wrapperClass+"--clone").clone()).removeClass(this.wrapperClass+"--clone"),e.find(".popup-content").html(t),e.find(".support-osu-popup__close-button").on("click",(function(t){return t.preventDefault(),e.fadeOut(),Blackout.hide()})),e.appendTo(i(this.container))},e.prototype.showPopup=function(){var t;return"function"==typeof(t=document.activeElement).blur&&t.blur(),Blackout.show(),i(this.targetSelector).parents("."+this.wrapperClass).fadeIn()},e}()}).call(window)},"0vL2":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));var i=n("0h6b"),s=n("f4vq"),r=function(){function e(){}return e.promiseInit=function(t){return Promise.all([e.fetchToken(t),e.fetchScript()]).then((function(n){var i,s;return s=n[0],i=e.optionsWithToken(s),e.onXsollaReady(t),XPayStationWidget.init(i)}))},e.fetchScript=function(){return new Promise((function(t,e){if(!s.a.turbolinksReload.load("https://static.xsolla.com/embed/paystation/1.0.7/widget.min.js",t))return t()}))},e.fetchToken=function(e){return new Promise((function(n,s){return t.post(Object(i.route)("payments.xsolla.token"),{orderNumber:e}).done((function(t){return 32!==t.length?s({message:"wrong token length"}):n(t)})).fail((function(t){return s({xhr:t})}))}))},e.optionsWithToken=function(t){return{access_token:t,sandbox:!1}},e.onXsollaReady=function(t){var e;return e=!1,XPayStationWidget.on(XPayStationWidget.eventTypes.STATUS_DONE,(function(){return e=!0})),XPayStationWidget.on(XPayStationWidget.eventTypes.CLOSE,(function(){if(e)return LoadingOverlay.show(),LoadingOverlay.show.flush(),window.location=Object(i.route)("payments.xsolla.completed",{foreignInvoice:t})}))},e}()}).call(this,n("5wds"))},"0yP9":function(t,e,n){"use strict";(function(t,i){n.d(e,"a",(function(){return u}));var s=n("0h6b"),r=n("Hs9Z"),o=n("EaLk"),a=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};class u{constructor(){this.selectedIndex=-1,this.shouldShowSuggestions=!1,this.suggestions=[],this.debouncedFetchSuggestions=Object(r.debounce)(this.fetchSuggestions,200),this.query=""}get isSuggestionsVisible(){return this.shouldShowSuggestions&&this.suggestions.length>0}get selectedItem(){return this.suggestions[this.selectedIndex]}get displayText(){return null==this.selectedItem?this.query:this.selectedItem.title}cancel(){var t;null===(t=this.xhr)||void 0===t||t.abort(),this.debouncedFetchSuggestions.cancel()}search(){const e=this.displayText.trim();e.length&&t.visit(Object(s.route)("search",{mode:"wiki_page",query:e}))}selectIndex(t){return t<-1?this.selectIndex(this.suggestions.length-1):t>=this.suggestions.length?this.selectIndex(-1):(this.selectedIndex=t,void(this.shouldShowSuggestions=!0))}shiftSelectedIndex(t){this.selectIndex(this.selectedIndex+t)}unselect(t){this.selectIndex(-1),this.shouldShowSuggestions=this.shouldShowSuggestions&&!t}updateQuery(t){var e;const n=t.trim(),i=this.query.trim();this.query=t,this.selectedIndex=-1,i!==n&&(null===(e=this.xhr)||void 0===e||e.abort(),n.length>1?this.debouncedFetchSuggestions():this.suggestions.length=0)}fetchSuggestions(){this.xhr=i.getJSON(Object(s.route)("wiki-suggestions"),{query:this.query.trim()}).done(Object(o.d)(t=>{null!=t&&(this.suggestions=Object(o.m)(t),this.shouldShowSuggestions=!0)}))}}a([o.m],u.prototype,"selectedIndex",void 0),a([o.m],u.prototype,"shouldShowSuggestions",void 0),a([o.m],u.prototype,"suggestions",void 0),a([o.m],u.prototype,"query",void 0),a([o.e],u.prototype,"isSuggestionsVisible",null),a([o.e],u.prototype,"selectedItem",null),a([o.e],u.prototype,"displayText",null),a([o.d],u.prototype,"cancel",null),a([o.d],u.prototype,"search",null),a([o.d],u.prototype,"selectIndex",null),a([o.d],u.prototype,"shiftSelectedIndex",null),a([o.d],u.prototype,"unselect",null),a([o.d],u.prototype,"updateQuery",null),a([o.d],u.prototype,"fetchSuggestions",null)}).call(this,n("dMdw"),n("5wds"))},"1P+u":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("/G9H"),s=n("MeXQ"),r=n("6e4D");const o={id:null,text:osu.trans("rankings.countries.all")};class a extends i.PureComponent{constructor(){super(...arguments),this.handleCountryChange=t=>{osu.navigate(osu.updateQueryString(null,{country:t.id,page:null}))},this.handleFilterChange=t=>{osu.navigate(osu.updateQueryString(null,{filter:t.currentTarget.dataset.value,page:null}))},this.handleRenderOption=t=>{var e;return i.createElement("a",{key:null!==(e=t.option.id)&&void 0!==e?e:"",className:t.cssClasses,href:osu.updateQueryString(null,{country:t.option.id,page:null}),onClick:t.onClick},t.children)},this.handleVariantChange=t=>{osu.navigate(osu.updateQueryString(null,{variant:t.currentTarget.dataset.value,page:null}))}}get countries(){return null==this.props.countries?[]:(null==this.countriesSorted&&(this.countriesSorted=this.props.countries.sort((t,e)=>{if((null===currentUser||void 0===currentUser?void 0:currentUser.country_code)===t.code)return-1;if((null===currentUser||void 0===currentUser?void 0:currentUser.country_code)===e.code)return 1;const n=e.display-t.display;return 0!==n?n:t.name.localeCompare(e.name)})),this.countriesSorted)}get countryCode(){return new URL(window.location.href).searchParams.get("country")}get currentVariant(){return new URL(window.location.href).searchParams.get("variant")}get filterMode(){return new URL(window.location.href).searchParams.get("filter")}get options(){if(null==this.optionsCached){const t=this.optionsCached=new Map;t.set(o.id,o),this.countries.forEach(e=>{t.set(e.code,{id:e.code,text:e.name})})}return this.optionsCached}get selectedOption(){var t;return null!==(t=this.options.get(this.countryCode))&&void 0!==t?t:o}render(){var t;return this.prevCountries!==this.props.countries&&(this.countriesSorted=void 0,this.optionsCached=void 0,this.prevCountries=this.props.countries),i.createElement("div",{className:"ranking-filter"},i.createElement("div",{className:"ranking-filter__item ranking-filter__item--full"},this.renderCountries()),null!=currentUser.id&&i.createElement("div",{className:"ranking-filter__item"},i.createElement("div",{className:"ranking-filter__item--title"},osu.trans("rankings.filter.title")),i.createElement(r.a,{currentValue:null!==(t=this.filterMode)&&void 0!==t?t:"all",onChange:this.handleFilterChange,showTitle:!1,values:["all","friends"]})),null!=this.props.variants&&i.createElement("div",{className:"ranking-filter__item"},i.createElement("div",{className:"ranking-filter__item--title"},osu.trans("rankings.filter.variant.title")),this.renderVariants()))}renderCountries(){return"performance"!==this.props.type?null:i.createElement(i.Fragment,null,i.createElement("div",{className:"ranking-filter__item--title"},osu.trans("rankings.countries.title")),i.createElement(s.a,{bn:"ranking-select-options",onChange:this.handleCountryChange,options:[...this.options.values()],renderOption:this.handleRenderOption,selected:this.selectedOption}))}renderVariants(){var t;return null==this.props.variants?null:i.createElement(r.a,{currentValue:null!==(t=this.currentVariant)&&void 0!==t?t:"all",onChange:this.handleVariantChange,showTitle:!1,transPrefix:`beatmaps.variant.${this.props.gameMode}.`,values:this.props.variants})}}},"2uEk":function(t,e,n){(function(t,e){n("5wds"),n("5wds");(function(){var n,i=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;n="line-chart",this.LineChart=function(){function r(r,o){var a,u,l,c,h,d,p,f,m;for(d in this.options=null!=o?o:{},this.resize=i(this.resize,this),this.onHover=i(this.onHover,this),this.lookupIndexFromX=i(this.lookupIndexFromX,this),this.hoverStart=i(this.hoverStart,this),this.hoverReset=i(this.hoverReset,this),this.hoverEnd=i(this.hoverEnd,this),this.drawLine=i(this.drawLine,this),this.drawAxes=i(this.drawAxes,this),this.setWrapperSize=i(this.setWrapperSize,this),this.setSvgSize=i(this.setSvgSize,this),this.setLineSize=i(this.setLineSize,this),this.setAxesSize=i(this.setAxesSize,this),this.setScalesRange=i(this.setScalesRange,this),this.setDimensions=i(this.setDimensions,this),this.loadData=i(this.loadData,this),this.margins={top:20,right:20,bottom:50,left:60},t.assign(this.margins,this.options.margins),this.id=Math.floor(1e3*Math.random()),null==(a=this.options).scales&&(a.scales={}),null==(u=this.options.scales).x&&(u.x=e.scaleTime()),null==(l=this.options.scales).y&&(l.y=e.scaleLinear()),null==(c=this.options).circleLine&&(c.circleLine=!1),null==(h=this.options).axisLabels&&(h.axisLabels=!0),this.area=e.select(r).classed(osu.classWithModifiers(n,this.options.modifiers),!0),this.svg=this.area.append("svg"),this.svgWrapper=this.svg.append("g").classed(n+"__wrapper",!0),this.options.axisLabels&&(this.svgXAxis=this.svgWrapper.append("g").classed(n+"__axis "+n+"__axis--x",!0),this.svgYAxis=this.svgWrapper.append("g").classed(n+"__axis "+n+"__axis--y",!0)),this.svgLine=this.svgWrapper.append("path").classed(n+"__line",!0),this.hoverArea=this.area.append("div").classed(n+"__hover-area",!0).on("mouseout",this.hoverEnd).on("mousemove",this.onHover).on("drag",this.onHover),p=this.margins)s.call(p,d)&&(m=p[d],this.hoverArea.style(d,m+"px"));this.hover=this.hoverArea.append("div").classed(n+"__hover",!0).attr("data-visibility","hidden"),this.options.circleLine&&(this.hoverLine=this.hover.append("div").classed(n+"__hover-line",!0)),this.hoverCircle=this.hover.append("div").classed(n+"__hover-circle",!0),this.hoverInfoBox=this.hover.append("div").classed(n+"__hover-info-box",!0).attr("data-float","left"),this.hoverInfoBoxX=this.hoverInfoBox.append("div").classed(n+"__hover-info-box-text "+n+"__hover-info-box-text--x",!0),this.hoverInfoBoxY=this.hoverInfoBox.append("div").classed(n+"__hover-info-box-text "+n+"__hover-info-box-text--y",!0),this.options.axisLabels&&(this.xAxis=e.axisBottom().tickSizeOuter(0).tickPadding(5),this.yAxis=e.axisLeft().ticks(4)),this.line=e.line().curve(null!=(f=this.options.curve)?f:e.curveMonotoneX)}return r.prototype.loadData=function(t){return this.data=t,this.svgLine.datum(t),this.resize()},r.prototype.setDimensions=function(){var t;return(t=this.area.node().getBoundingClientRect()).width>0&&t.height>0&&(this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom),!0)},r.prototype.setScalesRange=function(){var t,n;return this.options.scales.x.range([0,this.width]).domain((null!=(t=this.options.domains)?t.x:void 0)||e.extent(this.data,(function(t){return t.x}))),this.options.scales.y.range([this.height,0]).domain((null!=(n=this.options.domains)?n.y:void 0)||e.extent(this.data,(function(t){return t.y})))},r.prototype.setAxesSize=function(){var t,e,n,i;if(this.options.axisLabels)return this.xAxis.scale(this.options.scales.x).tickSizeInner(-this.height).ticks(null!=(e=null!=(n=this.options.ticks)?n.x:void 0)?e:15).tickFormat(this.options.formats.x).tickValues(null!=(t=this.options.tickValues)?t.x:void 0),this.yAxis.scale(this.options.scales.y).tickSizeInner(-this.width).tickFormat(this.options.formats.y).tickValues(null!=(i=this.options.tickValues)?i.y:void 0)},r.prototype.setLineSize=function(){return this.line.x((t=this,function(e){return t.options.scales.x(e.x)})).y(function(t){return function(e){return t.options.scales.y(e.y)}}(this));var t},r.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},r.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},r.prototype.drawAxes=function(){if(this.options.axisLabels)return this.svgXAxis.transition().attr("transform","translate(0, "+this.height+")").call(this.xAxis),this.svgYAxis.transition().call(this.yAxis),this.svgXAxis.selectAll(".tick line").classed(n+"__tick-line "+n+"__tick-line--default",!0),this.svgYAxis.selectAll(".tick line").classed(n+"__tick-line "+n+"__tick-line--default",!0),this.svgXAxis.selectAll(".domain").classed("u-hidden",!0),this.svgYAxis.selectAll(".domain").classed("u-hidden",!0),this.svgXAxis.selectAll("text").style("text-anchor","start").attr("transform","rotate(45) translate(5, 0)").classed(n+"__tick-text "+n+"__tick-text--strong",!0),this.svgYAxis.selectAll("text").classed(n+"__tick-text",!0)},r.prototype.drawLine=function(){return this.svgLine.transition().attr("d",this.line)},r.prototype.hoverEnd=function(){return Fade.out(this.hover.node())},r.prototype.hoverReset=function(){var t,e;return e=this,(t=function(t,n){var i,s,r,o,a;for(a=[],s=0,r=(o=[e.hoverLine,e.hoverCircle]).length;s<r;s++)i=o[s],a.push(i.style(t,n));return a})("transition","none"),this.hoverEnd(),t("transform",null),Timeout.set(0,(function(){return t("transition",null)}))},r.prototype.hoverStart=function(){return Fade.in(this.hover.node())},r.prototype.lookupIndexFromX=function(t){return e.bisector((function(t){return t.x})).left(this.data,t)},r.prototype.onHover=function(){var t,n,i,s,r,o,a,u,l,c,h;if((c=this.options.scales.x.invert(e.mouse(this.hoverArea.node())[0]),i=this.lookupIndexFromX(c))&&(this.data[i-1]&&this.data[i]&&(this.hoverStart(),Timeout.clear(this._autoEndHover),osu.isMobile()&&(this._autoEndHover=Timeout.set(3e3,this.hoverEnd)),n=c-this.data[i-1].x<=this.data[i].x-c?this.data[i-1]:this.data[i],t=["x","y"].map((h=this,function(t){return Math.round(h.options.scales[t](n[t]))+"px"})),this.hoverLine.style("transform","translateX("+t[0]+")"),this.hoverCircle.style("transform","translate("+t.join(",")+")"),this.hoverInfoBoxX.html((null!=(o=null!=(a=this.options.infoBoxFormats)?a.x:void 0)?o:this.options.formats.x)(n.x)),this.hoverInfoBoxY.html((null!=(u=null!=(l=this.options.infoBoxFormats)?l.y:void 0)?u:this.options.formats.y)(n.y)),null!=(r=e.event.clientX))))if(s=this.hoverInfoBox.node().getBoundingClientRect(),"right"===this.hoverInfoBox.attr("data-float")){if(r>s.left)return this.hoverInfoBox.attr("data-float","left")}else if(r<s.right)return this.hoverInfoBox.attr("data-float","right")},r.prototype.resize=function(){if(this.setDimensions())return this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setAxesSize(),this.setLineSize(),this.drawAxes(),this.drawLine(),this.hoverReset()},r}()}).call(window)}).call(this,n("Hs9Z"),n("q3Jf"))},"38ot":function(t,e,n){n("5wds");var i=n("5wds");(function(){var t;t=document.getElementsByClassName("js-fixed-element"),i(document).on("shown.bs.modal",".modal",(function(t){if(!osu.isIos)return i(t.target).find(".modal-af").focus()})),i(document).on("hidden.bs.modal",".modal",(function(){return i(".modal-backdrop").remove(),i("body, .js-fixed-element").css({paddingRight:""})})),i(document).on("show.bs.modal",".modal",(function(){var e,n,s,r,o,a,u,l;for(Timeout.set(10,(function(){return i(".modal-backdrop").trigger("bsTransitionEnd")})),e=[],s=r=0,a=t.length;r<a;s=++r)n=t[s],e[s]=n.getBoundingClientRect(),e[s].skip="fixed"!==getComputedStyle(n).position;for(l=[],s=o=0,u=t.length;o<u;s=++o)n=t[s],e[s].skip||(n.style.left=e[s].left+"px",l.push(n.style.width=e[s].width+"px"));return l})),i(document).on("shown.bs.modal",".modal",(function(){var e,n,s,r,o,a,u,l,c;for(u=i("body").css("padding-right"),c=[],n=s=0,o=t.length;s<o;n=++s)e=t[n],c[n]="fixed"!==getComputedStyle(e).position;for(l=[],n=r=0,a=t.length;r<a;n=++r)e=t[n],c[n]||(e.style.paddingRight=u,e.style.left="",l.push(e.style.width=""));return l}))}).call(window)},"3Te0":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("0h6b"),s=n("/G9H"),r=n("MeXQ");class o extends s.PureComponent{constructor(){super(...arguments),this.handleChange=t=>{osu.navigate(this.href(t.id))},this.renderOption=t=>{var e;return s.createElement("a",{key:null!==(e=t.option.id)&&void 0!==e?e:-1,className:t.cssClasses,href:this.href(t.option.id),onClick:t.onClick},t.children)}}render(){const t=this.props.rooms.map(t=>({id:t.id,text:t.name})),e={id:this.props.currentRoom.id,text:this.props.currentRoom.name};return s.createElement(r.a,{bn:"spotlight-select-options",onChange:this.handleChange,options:t,renderOption:this.renderOption,selected:e})}href(t){return Object(i.route)("multiplayer.rooms.show",{room:null!=t?t:"latest"})}}},"5ASV":function(t,e,n){n("5wds");var i=n("5wds");(function(){this.StoreCart=function(){function t(){}return t.setEnabled=function(t){return i(".js-store-add-to-cart").prop("disabled",!t),i("#product-form").data("disabled",!t)},t}()}).call(window)},"5hXa":function(t,e,n){n("5wds");var i=n("5wds");(function(){i(document).on("keypress",".js-auto-submit",(function(t){if(13===t.which)return t.preventDefault(),i(t.target).trigger("change")})),i(document).on("change",".js-auto-submit",(function(t){var e;if((e=i(t.target)).val()!==e.data("last-submitted-value"))return e.data("last-submitted-value",e.val()),e.parents("form").submit()})),i(document).on("keypress",".content-editable-submit",(function(t){if(13===t.which)return t.preventDefault(),i(t.target).trigger("blur")})),i(document).on("blur",".content-editable-submit",(function(t){var e,n,s;if((n=i(t.target)).html()!==n.data("last-submitted-value"))return n.data("last-submitted-value",n.html()),e=n.parents("form"),(s=i(document.createElement("input"))).attr("type","hidden"),s.attr("name",n.attr("data-name")),s.attr("value",n.html()),e.append(s),e.submit(),s.remove()})),i(document).on("turbolinks:load",(function(){return i(".content-editable-submit").each((function(t,e){var n;return(n=i(e)).data("last-submitted-value",n.html())}))})),i(document).on("click","#popup-container, #overlay",(function(t){var e;return i("#overlay").fadeOut(),(e=i(t.target).closest(".popup-active")).fadeOut(null,e.remove)})),i(document).on("turbolinks:load",(function(){return i("[value=_disabled]").attr("disabled",!0)})),i(document).on("click",".clickable-row",(function(t){var e,n,i;if(i=t.target,!osu.isClickable(i))return(n=t.currentTarget).classList.contains("clickable-row-link")?n.click():null!=(e=n.getElementsByClassName("clickable-row-link")[0])?e.click():void 0})),i(document).on("keydown",".js-quick-submit",(function(t){if((t.ctrlKey||t.metaKey)&&13===t.keyCode)return t.preventDefault(),i(t.target).closest("form").submit()})),i(document).on("ajax:beforeSend",(function(t){var e,n,i,s,r,o;if((n=t.target)._submitting)return!1;for(n._submitting=!0,n._ujsSubmitDisabled=[],o=[],i=0,s=(r=n.querySelectorAll(".js-ujs-submit-disable")).length;i<s;i++)(e=r[i]).disabled||("1"===e.dataset.blurOnSubmitDisable&&e.blur(),e.disabled=!0,o.push(n._ujsSubmitDisabled.push(e)));return o})),i(document).on("ajax:complete",(function(t){var e,n,i;for((n=t.target)._submitting=!1,i=[];e=n._ujsSubmitDisabled.pop();)i.push(e.disabled=!1);return i}))}).call(window)},"6FbF":function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.CheckboxValidation=function(){function e(){this.validate=t(this.validate,this),i(document).on("change",".js-checkbox-validation",this.validate)}return e.prototype.validate=function(t){var e,n,i,s,r,o,a,u;if(null==(e=t.currentTarget)._checkboxValidationCache&&(e._checkboxValidationCache=JSON.parse(t.currentTarget.dataset.checkboxValidation)),a=t.target.name,null!=(s=t.currentTarget._checkboxValidationCache[a])){for(n=t.currentTarget.querySelectorAll("[name='"+a+"']"),u=t.currentTarget.getElementsByClassName("js-checkbox-validation--submit")[0],i=0,r=0,o=n.length;r<o;r++)n[r].checked&&(i+=1);return u.disabled=i<s.min||i>s.max}},e}()}).call(window)},"6TQG":function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicReply=function(){function i(i){this.bbcodePreview=i.bbcodePreview,this.forum=i.forum,this.stickyFooter=i.stickyFooter,this.toggleStick=n(this.toggleStick,this),this.toggleDeactivate=n(this.toggleDeactivate,this),this.toggle=n(this.toggle,this),this.stickOrUnstick=n(this.stickOrUnstick,this),this.posted=n(this.posted,this),this.inputChange=n(this.inputChange,this),this.enableFlash=n(this.enableFlash,this),this.deactivate=n(this.deactivate,this),this.activateWithReply=n(this.activateWithReply,this),this.activate=n(this.activate,this),this.setState=n(this.setState,this),this.getState=n(this.getState,this),this.deleteState=n(this.deleteState,this),this.available=n(this.available,this),this.initialize=n(this.initialize,this),this.container=document.getElementsByClassName("js-forum-topic-reply--container"),this.box=document.getElementsByClassName("js-forum-topic-reply"),this.block=document.getElementsByClassName("js-forum-topic-reply--block"),this.input=document.getElementsByClassName("js-forum-topic-reply--input"),this.toggleButtons=document.getElementsByClassName("js-forum-topic-reply--toggle"),this.fixedBar=document.getElementsByClassName("js-sticky-footer--fixed-bar"),e(document).on("ajax:success",".js-forum-topic-reply",this.posted),e(document).on("click",".js-forum-topic-reply--deactivate",this.toggleDeactivate),e(document).on("click",".js-forum-topic-reply--toggle",this.toggle),e(document).on("ajax:success",".js-forum-topic-reply--quote",this.activateWithReply),e(document).on("focus",".js-forum-topic-reply--input",this.activate),e(document).on("input change",".js-forum-topic-reply--input",t.debounce(this.inputChange,500)),e.subscribe("stickyFooter",this.stickOrUnstick),e(document).on("turbolinks:load",this.initialize)}return i.prototype.marker=function(){return document.querySelector('.js-sticky-footer[data-sticky-footer-target="forum-topic-reply"]')},i.prototype.$input=function(){return e(".js-forum-topic-reply--input")},i.prototype.initialize=function(){if(this.available())return this.deleteState("sticking"),this.input[0].value=this.getState("text")||"","1"===this.getState("active")?this.activate():void 0},i.prototype.available=function(){return this.block.length},i.prototype.deleteState=function(t){return localStorage.removeItem("forum-topic-reply--"+document.location.pathname+"--"+t)},i.prototype.getState=function(t){return localStorage.getItem("forum-topic-reply--"+document.location.pathname+"--"+t)},i.prototype.setState=function(t,e){return localStorage.setItem("forum-topic-reply--"+document.location.pathname+"--"+t,e)},i.prototype.activate=function(){var t,n,i,s;for(this.setState("active","1"),this.stickyFooter.markerEnable(this.marker()),e.publish("stickyFooter:check"),t=0,n=(i=this.toggleButtons).length;t<n;t++)i[t].classList.add("js-activated");return"1"!==this.getState("sticking")&&null!=currentUser.id&&this.enableFlash(),Timeout.set(0,(s=this,function(){return s.input[0].focus()}))},i.prototype.activateWithReply=function(t,e){var n,i;return e+="\n",(i=(n=this.$input()).val())&&(e=i+"\n\n"+e),n.val(e),this.inputChange(),n[0].selectionStart=e.length,this.activate()},i.prototype.deactivate=function(){var t,n,i,s,r;for(this.stickyFooter.markerDisable(this.marker()),this.setState("active","0"),e.publish("stickyFooter:check"),this.disableFlash(),r=[],n=0,i=(s=this.toggleButtons).length;n<i;n++)t=s[n],r.push(t.classList.remove("js-activated"));return r},i.prototype.disableFlash=function(){return e(".js-forum-topic-reply").removeClass("js-forum-topic-reply-flash")},i.prototype.enableFlash=function(){return e(".js-forum-topic-reply").addClass("js-forum-topic-reply-flash"),Timeout.set(500,this.disableFlash)},i.prototype.inputChange=function(){return this.setState("text",this.input[0].value)},i.prototype.posted=function(t,n){var i,s;return s=this.input[0],this.deactivate(),s.value="",this.setState("text",""),this.bbcodePreview.hidePreview({target:s}),i=e(n),this.forum.postPosition(i[0])-1!==this.forum.postPosition(this.forum.endPost())||"1"===t.target.dataset.forceReload?osu.navigate(i.find(".js-post-url").attr("href")):(this.forum.setTotalPosts(this.forum.totalPosts()+1),this.forum.endPost().insertAdjacentHTML("afterend",n),osu.pageChange(),this.forum.endPost().scrollIntoView())},i.prototype.stickOrUnstick=function(t,e){var n;return n=osu.isDesktop()?"forum-topic-reply"===e:"1"===this.getState("active"),this.toggleStick(n)},i.prototype.toggle=function(){return"1"===this.getState("active")?this.deactivate():this.activate()},i.prototype.toggleDeactivate=function(t){return t.stopPropagation(),this.deactivate()},i.prototype.toggleStick=function(t){var e,n,i,s,r;if(s="1"===this.getState("sticking"),document.body.style.overflow=!t||osu.isDesktop()?"":"hidden",t!==s)return n=this.box[0],t?(this.setState("sticking","1"),n.dataset.state="stick",r=this.fixedBar[0]):(this.deleteState("sticking"),null!=n.dataset.state&&delete n.dataset.state,r=this.container[0]),i=(e=this.$input()).is(":focus"),r.insertBefore(n,r.firstChild),i&&e.focus(),osu.pageChange()},i}()}).call(window)}).call(this,n("Hs9Z"))},"6Z8S":function(t,e,n){n("5wds");var i=n("5wds");(function(){var t;t=i({}),i.subscribe=t.on.bind(t),i.unsubscribe=t.off.bind(t),i.publish=t.trigger.bind(t)}).call(window)},"7mzp":function(t,e,n){n("5wds");var i=n("5wds");(function(){this.Timeago=function(){var t;this.observer=new MutationObserver((function(t){if(i.fn.timeago)return t.forEach((function(t){var e;return(e=i(t.addedNodes)).find(".js-timeago").add(e.filter(".js-timeago")).timeago()}))})),i(document).on("turbolinks:load",(t=this,function(){return i(".js-timeago").timeago(),t.observer.observe(document.body,{childList:!0,subtree:!0})}))}}).call(window)},"8DVv":function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){e(document).on("ajax:before",(function(){return LoadingOverlay.show(),e(document).one("ajax:complete.ujsHideLoadingOverlay",LoadingOverlay.hide)})),e(document).on("ajax:success",(function(n,i){var s,r;return r=function(){if(!t.isEmpty(null!=i?i.message:void 0))return osu.popup(i.message,"success")},"1"===n.target.getAttribute("data-reload-on-success")?(s="1"===n.target.getAttribute("data-reload-reset-scroll"),e(document).one("turbolinks:load",r),osu.reloadPage(!s)):r()})),e(document).on("ajax:error",(function(t,e){if("1"!==t.target.dataset.skipAjaxErrorPopup&&401!==e.status)return osu.ajaxError(e)}))}).call(window)}).call(this,n("Hs9Z"))},"9put":function(t,e,n){(function(t,e){n("5wds");var i=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.TooltipDefault=function(){function s(){this.timeagoTip=n(this.timeagoTip,this),this.rollback=n(this.rollback,this),this.autoAddTooltip=n(this.autoAddTooltip,this),this.onMouseOver=n(this.onMouseOver,this),i(document).on("mouseover touchstart","[title]:not(iframe)",this.onMouseOver),i(document).on("mouseenter touchstart",".u-ellipsis-overflow, .u-ellipsis-overflow-desktop, .u-ellipsis-pre-overflow",this.autoAddTooltip),i(document).on("turbolinks:before-cache",this.rollback)}return s.prototype.onMouseOver=function(e){var n,s,r,o,a,u,l,c,h;if(h=(o=e.currentTarget).getAttribute("title"),o.removeAttribute("title"),a=osu.presence(o.dataset.htmlTitle),0!==t.size(h)||null!=a){if(n=o.classList.contains("js-timeago")||o.classList.contains("js-tooltip-time")?this.timeagoTip(o,h):null!=a?a:i("<span>").text(h),!o._tooltip)return o._tooltip=!0,s=null!=(c=o.dataset.tooltipPosition)?c:"top center",u=function(){switch(s){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center";case"bottom center":return"top center"}}(),r="qtip tooltip-default","fixed"===o.dataset.tooltipFloat&&(r+=" tooltip-default--fixed"),null!=o.dataset.tooltipModifiers&&(r+=" tooltip-default--"+o.dataset.tooltipModifiers),l={overwrite:!1,content:n,position:{my:u,at:s,viewport:i(window)},show:{event:e.type,ready:!0},hide:{event:"click mouseleave"},style:{classes:r,tip:{width:10,height:8}}},"touchstart"===e.type&&(l.hide={inactive:3e3,event:"unfocus"}),o.dataset.tooltipPinPosition&&(l.position.effect=!1),o.dataset.tooltipHideEvents&&(l.hide.event=o.dataset.tooltipHideEvents),o.dataset.origTitle=h,i(o).qtip(l,e);i(o).qtip("set",{"content.text":n})}},s.prototype.autoAddTooltip=function(t){var e,n,s;return s=t.currentTarget,n=(e=i(s)).qtip("api"),s.offsetWidth<s.scrollWidth?n?n.enable():(e.attr("title",e.text()),e.trigger(t.type)):null!=n?n.disable():void 0},s.prototype.remove=function(t){if(t._tooltip)return i(t).qtip("destroy",!0),t._tooltip=!1,null==t.getAttribute("title")&&t.setAttribute("title",t.dataset.origTitle),delete t.dataset.origTitle},s.prototype.rollback=function(){var t,e,n,s,r;for(i(".qtip").remove(),r=[],e=0,n=(s=document.querySelectorAll("[data-orig-title]")).length;e<n;e++)t=s[e],r.push(t.setAttribute("title",t.dataset.origTitle));return r},s.prototype.timeagoTip=function(t,n){var s,r,o,a,u,l;return l=null!=(o=null!=(a=t.getAttribute("datetime"))?a:n)?o:t.textContent,u=e(l),s=i("<strong>").text(u.format("LL")),r=i("<span>").addClass("tooltip-default__time").text(u.format("LTS")+" "+this.tzString(u)),i("<span>").append(s).append(" ").append(r)},s.prototype.tzString=function(t){var e;return"UTC"+((e=t.utcOffset())%60==0?(e>=0?"+":"")+e/60:t.format("Z"))},s}()}).call(window)}).call(this,n("Hs9Z"),n("7EfK"))},AOHe:function(t,e,n){"use strict";(function(t,i){n.d(e,"a",(function(){return o}));var s=n("SquP"),r=n("0vL2"),o=function(){function e(){}return e.CHECKOUT_SELECTOR=".js-store-checkout-button",e.initialize=function(){var n,i,s,o,a,u,l;for(s={},i=0,o=(l=document.querySelectorAll(e.CHECKOUT_SELECTOR)).length;i<o;i++)switch(n=l[i],u=n.dataset.provider,a=n.dataset.orderNumber,u){case"centili":s.centili=Promise.resolve();break;case"free":s.free=Promise.resolve();break;case"paypal":s.paypal=Promise.resolve();break;case"xsolla":s.xsolla=r.a.promiseInit(a)}return t(e.CHECKOUT_SELECTOR).on("click.checkout",(function(n){var i,r,o;if(r=n.target.dataset,i=r.orderId,null!=(u=r.provider))return LoadingOverlay.show(),LoadingOverlay.show.flush(),null!=(o=s[u])?o.then((function(){return window.osu.promisify(t.post(laroute.route("store.checkout.store"),{provider:u,orderId:i}))})).then((function(){return e.startPayment(n.target.dataset)})).catch(e.handleError):void 0}))},e.startPayment=function(e){var n,i,r;switch(n=e.orderId,i=e.provider,r=e.url,i){case"centili":return new Promise((function(t){return window.location.href=r}));case"free":return window.osu.promisify(t.post(laroute.route("store.checkout.store",{orderId:n,provider:i})));case"paypal":return s.a.fetchApprovalLink(n).then((function(t){return window.location.href=t}));case"xsolla":return new Promise((function(t){return XPayStationWidget.open(),LoadingOverlay.hide(),t()}))}},e.handleError=function(t){var e;if(LoadingOverlay.hide(),!t.getResponseHeader||(e=t.getResponseHeader("Content-Type"),!i.startsWith(e,"application/javascript")))return osu.ajaxError(null!=t?t.xhr:void 0)},e}()}).call(this,n("5wds"),n("Hs9Z"))},CFbt:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t;t=function(t,e,n){var s,r,o,a,u,l;return null==n&&(n=""),o=(s=i(t.target).parents("form").find("[name=body], .js-bbcode-body")).val(),u=(r=s[0]).selectionStart,a=r.selectionEnd,(l=[o.substring(0,u),o.substring(u,a),o.substring(a)])[0]=l[0]+e,l[2]=n+l[2],u===a?(s.val(l[0]+l[2]),r.selectionStart=l[0].length,r.selectionEnd=r.selectionStart):(s.val(l[0]+l[1]+l[2]),r.selectionStart=u,r.selectionEnd=l[0].length+l[1].length+n.length),s.trigger("bbcode:inserted").trigger("input").focus()},[["bold","[b]","[/b]"],["heading","[heading]","[/heading]"],["image","[img]","[/img]"],["italic","[i]","[/i]"],["link","[url]","[/url]"],["list","[list]\n[*]","[/list]"],["list-numbered","[list=1]\n[*]","[/list]"],["strikethrough","[s]","[/s]"],["underline","[u]","[/u]"],["spoilerbox","[box=]","[/box]"]].forEach((function(e){var n,s,r;return n=e[0],r=e[1],s=e[2],i(document).on("click",".js-bbcode-btn--"+n,(function(e){return t(e,r,s)}))})),i(document).on("turbolinks:load",(function(){return i(".js-bbcode-btn--size").val("")})),i(document).on("change",".js-bbcode-btn--size",(function(e){var n,s;return n=i(e.target),s=parseInt(n.val(),10),n.val(""),t(e,"[size="+s+"]","[/size]")}))}).call(window)},CwFt:function(t,e,n){"use strict";var i=n("0h6b"),s=n("cF9b"),r=n("/G9H"),o=n("PPOh"),a=n("mk7q"),u=n("NW+U"),l=n("yun6");function c({beatmapset:t,modifiers:e=[]}){const n=Object(i.route)("beatmapsets.show",{beatmapset:t.id});return r.createElement("a",{className:osu.classWithModifiers("beatmapset-search-card",e),href:n},r.createElement("div",{className:"beatmapset-search-card__cover-container"},r.createElement(u.a,{className:"beatmapset-search-card__cover",src:t.covers.list})),r.createElement("div",{className:"beatmapset-search-card__details"},r.createElement("div",{className:"beatmapset-search-card__title"},`${Object(l.e)(t)} `,r.createElement("span",{className:"beatmapset-search-card__title-artist"},osu.trans("users.show.extra.beatmaps.by_artist",{artist:Object(l.c)(t)}))),r.createElement("div",{className:"beatmapset-search-card__extra"},osu.trans("beatmapsets.show.details.mapped_by",{mapper:t.creator}))))}var h=n("jEEn"),d=n("FVE9"),p=n("VefT"),f=n("AJEZ");function m({user:t,modifiers:e=[]}){const n=Object(i.route)("users.show",{user:t.id});return r.createElement("div",{className:`${osu.classWithModifiers("user-search-card",e)} clickable-row`},r.createElement("a",{className:"user-search-card__avatar-container",href:n},r.createElement("div",{className:"avatar avatar--full",style:{backgroundImage:osu.urlPresence(t.avatar_url)}})),r.createElement("div",{className:"user-search-card__details"},r.createElement("div",{className:"user-search-card__col  user-search-card__col--flag"},r.createElement(h.a,{country:t.country})),r.createElement("a",{className:"user-search-card__col user-search-card__col--username clickable-row-link",href:n},t.username),t.is_supporter?r.createElement("div",{className:"user-search-card__col user-search-card__col--icon u-hidden-narrow"},r.createElement(p.a,{level:t.support_level,modifiers:["quick-search"]})):null,r.createElement(f.a,{groups:t.groups,short:!0,wrapper:"user-search-card__col user-search-card__col--icon"}),r.createElement("div",{className:"user-search-card__col user-search-card__col--icon"},r.createElement(d.a,{modifiers:["quick-search"],userId:t.id}))))}const g=["forum_post","wiki_page"];let v=class extends r.Component{constructor(){super(...arguments),this.inputRef=r.createRef(),this.focus=()=>{var t;null!=this.inputRef.current&&(this.inputRef.current.selectionStart=0,this.inputRef.current.selectionEnd=this.inputRef.current.value.length,this.props.worker.selectNone(),null===(t=this.inputRef.current)||void 0===t||t.focus())},this.onInputKeyDown=t=>{const e=t.key;"Enter"===e&&(this.props.worker.debouncedSearch.flush(),this.navigateToSelected()),"ArrowUp"!==e&&"ArrowDown"!==e||this.props.worker.cycleSelectedItem("ArrowDown"===e?1:-1)},this.onMouseLeave=t=>{this.props.worker.selectNone()},this.selectBeatmapsetOthers=()=>this.selectBox("beatmapset_others"),this.selectUserOthers=()=>this.selectBox("user_others"),this.updateQuery=t=>{this.props.worker.updateQuery(t.currentTarget.value)}}render(){let t=osu.classWithModifiers("quick-search",this.props.modifiers);return t+=" u-fancy-scrollbar",r.createElement("div",{className:t},r.createElement("div",{className:"quick-search-input"},r.createElement("div",{className:"quick-search-input__field"},r.createElement("span",{className:"quick-search-input__icon"},this.props.worker.searching?r.createElement(o.a,null):r.createElement("span",{className:"fas fa-search"})),r.createElement("input",{ref:this.inputRef,className:"quick-search-input__input js-click-menu--autofocus",onChange:this.updateQuery,onKeyDown:this.onInputKeyDown,placeholder:osu.trans("home.search.placeholder"),value:this.props.worker.query})),null!=this.props.onClose&&r.createElement("button",{className:"btn-osu-big btn-osu-big--quick-search-close",onClick:this.props.onClose,type:"button"},osu.trans("common.buttons.close"))),this.renderResult())}boxIsActive(t,e){var n;const i=this.props.worker;return i.currentSection===t&&(null===(n=i.selected)||void 0===n?void 0:n.index)===e}count(t){return null===this.props.worker.searchResult?0:this.props.worker.searchResult[t].total}navigateToSelected(){const t=this.props.worker.selectedURL;t&&osu.navigate(t,!1)}renderBeatmapsets(){return null===this.props.worker.searchResult?null:r.createElement("div",{className:"quick-search-items"},this.props.worker.searchResult.beatmapset.beatmapsets.map((t,e)=>{return r.createElement("div",{key:t.id,className:"quick-search-items__item",onMouseEnter:()=>this.selectBox("beatmapset",e),onMouseLeave:this.onMouseLeave},r.createElement(c,{beatmapset:t,modifiers:this.boxIsActive("beatmapset",e)?["active"]:[]}))}),r.createElement("div",{className:"quick-search-items__item",onMouseEnter:this.selectBeatmapsetOthers,onMouseLeave:this.onMouseLeave},this.renderResultLink("beatmapset",this.boxIsActive("beatmapset_others",0))))}renderMoreOtherResultLink(){const t=g.filter(t=>this.count(t)>0);return 0===t.length?null:r.createElement("div",{className:"quick-search-items"},t.map((t,e)=>{return r.createElement("div",{key:t,className:"quick-search-items__item",onMouseEnter:()=>this.selectBox("others",e),onMouseLeave:this.onMouseLeave},this.renderResultLink(t,this.boxIsActive("others",e)))}))}renderNoMoreOtherResultLink(){const t=g.filter(t=>0===this.count(t));return 0===t.length?null:r.createElement("div",{className:"quick-search-items quick-search-items--empty"},t.map(t=>r.createElement("div",{key:t,className:"quick-search-items__item"},osu.trans("quick_search.result.empty_for",{modes:osu.trans(`quick_search.mode.${t}`)}))))}renderOthers(){return 0===this.count("forum_post")&&0===this.count("wiki_page")?r.createElement("span",{className:"quick-search-items quick-search-items--empty"},osu.trans("quick_search.result.empty_for",{modes:osu.transArray([osu.trans("quick_search.mode.forum_post"),osu.trans("quick_search.mode.wiki_page")])})):r.createElement(r.Fragment,null,this.renderMoreOtherResultLink(),this.renderNoMoreOtherResultLink())}renderResult(){return null==this.props.worker.searchResult?null:r.createElement("div",{className:"quick-search-result"},r.createElement("div",{className:"quick-search-result__item"},this.renderTitle("user"),this.renderUsers()),r.createElement("div",{className:"quick-search-result__item"},this.renderTitle("beatmapset"),this.renderBeatmapsets()),r.createElement("div",{className:"quick-search-result__item"},this.renderTitle("other"),this.renderOthers()))}renderResultLink(t,e=!1){let n="quick_search.result.";return n+=g.includes(t)?"title":"more",r.createElement("a",{className:osu.classWithModifiers("search-result-more",e?["active"]:[]),href:Object(i.route)("search",{mode:t,query:this.props.worker.query})},r.createElement("div",{className:"search-result-more__content"},osu.trans(n,{mode:osu.trans(`quick_search.mode.${t}`)}),r.createElement("span",{className:"search-result-more__count"},osu.formatNumber(this.count(t)))),r.createElement("div",{className:"search-result-more__arrow"},r.createElement("span",{className:"fas fa-angle-right"})))}renderTitle(t){return r.createElement("h2",{className:"title"},r.createElement(a.a,{mappings:{":mode":r.createElement("strong",{key:"mode"},osu.trans(`quick_search.mode.${t}`))},pattern:osu.trans("quick_search.result.title")}))}renderUsers(){return null==this.props.worker.searchResult?null:0===this.count("user")?r.createElement("span",{className:"quick-search-items quick-search-items--empty"},osu.trans("quick_search.result.empty",{mode:osu.trans("quick_search.mode.beatmapset")})):r.createElement("div",{className:"quick-search-items"},this.props.worker.searchResult.user.users.map((t,e)=>{return r.createElement("div",{key:t.id,className:"quick-search-items__item",onMouseEnter:()=>this.selectBox("user",e),onMouseLeave:this.onMouseLeave},r.createElement(m,{modifiers:this.boxIsActive("user",e)?["active"]:[],user:t}))}),this.count("user")>this.props.worker.searchResult.user.users.length?r.createElement("div",{className:"quick-search-items__item",onMouseEnter:this.selectUserOthers,onMouseLeave:this.onMouseLeave},this.renderResultLink("user",this.boxIsActive("user_others",0))):null)}selectBox(t,e=0){this.props.worker.setSelected(t,e)}};v=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([s.e],v);e.a=v},"E+Th":function(t,e,n){(function(t,e){n("5wds");var i=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.FancyChart=function(){function s(e,i){var s,r,o,a;this.options=null!=i?i:{},this.lookupIndexFromX=n(this.lookupIndexFromX,this),this.hoverRefresh=n(this.hoverRefresh,this),this.hoverEnd=n(this.hoverEnd,this),this.resize=n(this.resize,this),this.recalc=n(this.recalc,this),this.reveal=n(this.reveal,this),this.drawLine=n(this.drawLine,this),this.setWrapperSize=n(this.setWrapperSize,this),this.setSvgSize=n(this.setSvgSize,this),this.setLineSize=n(this.setLineSize,this),this.setScalesRange=n(this.setScalesRange,this),this.setHoverAreaSize=n(this.setHoverAreaSize,this),this.setDimensions=n(this.setDimensions,this),this.loadData=n(this.loadData,this),this.hide=n(this.hide,this),null==(s=this.options).scales&&(s.scales={}),null==(r=this.options.scales).x&&(r.x=t.scaleLinear()),null==(o=this.options.scales).y&&(o.y=t.scaleLinear()),this.margins={top:25,right:20,bottom:10,left:0},this.area=t.select(e),this.area.selectAll(".fancy-graph").remove(),this.svg=this.area.append("svg").classed("fancy-graph",!0),this.svgWrapper=this.svg.append("g"),this.svgLine=this.svgWrapper.append("path").classed("fancy-graph__line",!0).attr("opacity",0),this.line=t.line().curve(t.curveMonotoneX),this.svgEndCircle=this.svgWrapper.append("circle").classed("fancy-graph__circle",!0).attr("r",2).attr("opacity",0),this.svgHoverArea=this.svg.append("rect").classed("fancy-graph__hover-area",!0).on("mouseout",this.hoverEnd).on("mousemove",this.hoverRefresh).on("drag",this.hoverRefresh),this.svgHoverMark=this.svgWrapper.append("circle").classed("fancy-graph__circle",!0).attr("data-visibility","hidden").attr("r",2),a=osu.parseJson(e.dataset.src),this.loadData(a)}return s.prototype.hide=function(){return this.svgEndCircle.attr("opacity",0),this.svgLine.attr("opacity",0)},s.prototype.loadData=function(t){if(!e.isEqual(t,this.data))return this.data=null!=t?t:[],this.svgLine.datum(this.data),this.reveal()},s.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},s.prototype.setHoverAreaSize=function(){return this.svgHoverArea.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},s.prototype.setScalesRange=function(){var e,n,i,s;return this.options.scales.x.range([0,this.width]).domain(null!=(e=null!=(n=this.options.domains)?n.x:void 0)?e:t.extent(this.data,(function(t){return t.x}))),this.options.scales.y.range([this.height,0]).domain(null!=(i=null!=(s=this.options.domains)?s.y:void 0)?i:t.extent(this.data,(function(t){return t.y})))},s.prototype.setLineSize=function(){var t,n;if(this.line.x((n=this,function(t){return n.options.scales.x(t.x)})).y(function(t){return function(e){return t.options.scales.y(e.y)}}(this)),null!=(t=e.last(this.data)))return this.svgEndCircle.attr("transform","translate("+this.options.scales.x(t.x)+", "+this.options.scales.y(t.y)+")")},s.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},s.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},s.prototype.drawLine=function(){return this.svgLine.attr("stroke-dasharray",0).attr("d",this.line)},s.prototype.reveal=function(){var e;return null==this.data[0]?this.hide():(this.recalc(),this.svgLine.attr("d",this.line),e=this.svgLine.node().getTotalLength(),this.svgEndCircle.attr("opacity",0),this.svgLine.attr("stroke-dasharray",e).attr("stroke-dashoffset",e).transition().delay(400).duration(1e3).ease(t.easeSinOut).attr("stroke-dashoffset",0).attr("opacity",1),this.svgEndCircle.transition().delay(1300).duration(300).ease(t.easeSinOut).attr("opacity",1))},s.prototype.recalc=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setLineSize(),this.setHoverAreaSize()},s.prototype.resize=function(){return this.recalc(),this.drawLine()},s.prototype.hoverEnd=function(){return Fade.out(this.svgHoverMark.node()),i.publish("fancy-chart:hover-"+this.options.hoverId+":end")},s.prototype.hoverRefresh=function(){var n,s,r,o,a;if(null!=this.options.hoverId&&(null!=this.data[0]&&(o=this.options.scales.x.invert(t.mouse(this.svgHoverArea.node())[0]-this.margins.left),null!=(r=this.lookupIndexFromX(o)))))return Fade.in(this.svgHoverMark.node()),Timeout.clear(this._hoverTimeout),this._hoverTimeout=Timeout.set(3e3,this.hoverEnd),s=0===r?this.data[0]:r>=this.data.length?e.last(this.data):o-this.data[r-1].x<=this.data[r].x-o?this.data[r-1]:this.data[r],n=["x","y"].map((a=this,function(t){return a.options.scales[t](s[t])})),this.svgHoverMark.attr("transform","translate("+n.join(", ")+")"),i.publish("fancy-chart:hover-"+this.options.hoverId+":refresh",{data:s})},s.prototype.lookupIndexFromX=function(e){return t.bisector((function(t){return t.x})).left(this.data,e)},s}()}).call(window)}).call(this,n("q3Jf"),n("Hs9Z"))},"E/7X":function(t,e,n){(function(t,e){n("5wds");var i=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.Forum=function(){function s(){this.moreMeta=n(this.moreMeta,this),this.jumpToSubmit=n(this.jumpToSubmit,this),this.showMore=n(this.showMore,this),this.postUrlClick=n(this.postUrlClick,this),this.initialScrollTo=n(this.initialScrollTo,this),this.toggleDeleted=n(this.toggleDeleted,this),this.scrollTo=n(this.scrollTo,this),this.keyboardNavigation=n(this.keyboardNavigation,this),this.jumpTo=n(this.jumpTo,this),this.refreshCounter=n(this.refreshCounter,this),this.refreshLoadMoreLinks=n(this.refreshLoadMoreLinks,this),this.lastPostLoaded=n(this.lastPostLoaded,this),this.startingPostLoaded=n(this.startingPostLoaded,this),this.endPost=n(this.endPost,this),this.setCounter=n(this.setCounter,this),this.setTotalPosts=n(this.setTotalPosts,this),this.showDeleted=n(this.showDeleted,this),this.totalPosts=n(this.totalPosts,this),this.postPosition=n(this.postPosition,this),this.boot=n(this.boot,this),this._totalPostsDiv=document.getElementsByClassName("js-forum__total-count"),this._deletedPostsDiv=document.getElementsByClassName("js-forum__deleted-count"),this._firstPostDiv=document.getElementsByClassName("js-forum__topic-first-post-id"),this._userCanModerateDiv=document.getElementsByClassName("js-forum__topic-user-can-moderate"),this._postsCounter=document.getElementsByClassName("js-forum__posts-counter"),this._postsProgress=document.getElementsByClassName("js-forum__posts-progress"),this.posts=document.getElementsByClassName("js-forum-post"),this.loadMoreLinks=document.getElementsByClassName("js-forum-posts-show-more"),this.throttledBoot=t.throttle(this.boot,100),this.maxPosts=250,i(document).on("turbolinks:load",this.throttledBoot),i.subscribe("osu:page:change",this.throttledBoot),i(window).on("scroll",this.refreshCounter),i(document).on("click",".js-forum-posts-show-more",this.showMore),i(document).on("click",".js-post-url",this.postUrlClick),i(document).on("submit",".js-forum-posts-jump-to",this.jumpToSubmit),i(document).on("keyup",this.keyboardNavigation),i(document).on("click",".js-forum-topic-moderate--toggle-deleted",this.toggleDeleted)}return s.prototype.boot=function(){return this.refreshCounter(),this.refreshLoadMoreLinks(),this.initialScrollTo()},s.prototype.userCanModerate=function(){return"1"===this._userCanModerateDiv[0].getAttribute("data-user-can-moderate")},s.prototype.postPosition=function(t){return parseInt(t.getAttribute("data-post-position"),10)},s.prototype.firstPostId=function(){return parseInt(this._firstPostDiv[0].getAttribute("data-first-post-id"),10)},s.prototype.postId=function(t){return parseInt(t.getAttribute("data-post-id"),10)},s.prototype.totalPosts=function(){return 0===this._totalPostsDiv.length?null:parseInt(this._totalPostsDiv[0].dataset.total,10)},s.prototype.showDeleted=function(){var t;if(null!=(t=document.querySelector(".js-forum-topic-moderate--toggle-deleted")))return"1"===t.dataset.showDeleted},s.prototype.setTotalPosts=function(t){return i(this._totalPostsDiv).text(osu.formatNumber(t)).attr("data-total",t)},s.prototype.deletedPosts=function(){return 0===this._deletedPostsDiv.length?null:parseInt(this._deletedPostsDiv[0].dataset.total,10)},s.prototype.setDeletedPosts=function(t){return i(this._deletedPostsDiv).text(osu.formatNumber(t)).attr("data-total",t)},s.prototype.setCounter=function(t){return this.currentPostPosition=this.postPosition(t),this.currentPostPosition>this.totalPosts()&&this.setTotalPosts(this.currentPostPosition),window.reloadUrl=this.postUrlN(this.currentPostPosition),this._postsCounter[0].textContent=osu.formatNumber(this.currentPostPosition),this._postsProgress[0].style.width=100*this.currentPostPosition/this.totalPosts()+"%"},s.prototype.endPost=function(){return this.posts[this.posts.length-1]},s.prototype.startingPostLoaded=function(){var t,e;return(e="1"===(t=document.querySelector(".js-forum__posts-show-more--previous")).dataset.noMore)||(e=this.postId(this.posts[0])<=this.firstPostId())&&(t.dataset.noMore="1"),e},s.prototype.lastPostLoaded=function(){var t,e;return(t="1"===(e=document.querySelector(".js-forum__posts-show-more--next")).dataset.noMore)||(t=this.postPosition(this.endPost())>=this.totalPosts())&&(e.dataset.noMore="1"),t},s.prototype.refreshLoadMoreLinks=function(){var t,e,n,s,r,o,a;if(this.loadMoreLinks.length){for(a=this.startingPostLoaded(),i(".js-header--main").toggleClass("hidden",!a),i(".js-header--alt").toggleClass("hidden",a),e=this.lastPostLoaded(),i(".js-forum__posts-show-more--next").toggleClass("hidden",e),this.userCanModerate()||i(".js-post-delete-toggle").hide(),e&&i(this.endPost()).find(".js-post-delete-toggle").css({display:""}),o=[],t=0,n=(r=this.loadMoreLinks).length;t<n;t++)s=r[t],o.push(s.href=this.moreMeta(s).url);return o}},s.prototype.refreshCounter=function(){var t,e,n,i,s,r;if(0!==this._postsCounter.length){if(t=null,osu.bottomPage())t=this.posts[this.posts.length-1];else for(e=0,n=(r=this.posts).length;e<n&&(s=(i=r[e]).getBoundingClientRect().top,Math.floor(window.stickyHeader.scrollOffset(s))<=0);e++)t=i;return null==t&&(t=this.posts[0]),this.setCounter(t)}},s.prototype.jumpTo=function(t){var n;return t=parseInt(t,10),!!isFinite(t)&&(t=Math.max(t,1),t=Math.min(t,this.totalPosts()),n=i(".js-forum-post[data-post-position='"+t+"']"),this._postsCounter[0].textContent=osu.formatNumber(t),n.length?this.scrollTo(n.attr("data-post-id")):e.visit(this.postUrlN(t)),!0)},s.prototype.keyboardNavigation=function(t){var e;if(!osu.isInputElement(t.target)&&this._postsCounter.length){t.preventDefault(),e=function(){switch(t.which){case 37:return this.currentPostPosition-1;case 39:return this.currentPostPosition+1}}.call(this);try{return this.jumpTo(e)}catch(n){}}},s.prototype.scrollTo=function(t){var e,n;if(e=document.querySelector(".js-forum-post[data-post-id='"+t+"']"))return 0!==(n=1===this.postPosition(e)?0:i(e).offset().top)&&(n=window.stickyHeader.scrollOffset(n)),window.scrollTo(window.pageXOffset,n),this.highlightPost(e)},s.prototype.highlightPost=function(t){return i(".js-forum-post--highlighted").removeClass("js-forum-post--highlighted"),i(t).addClass("js-forum-post--highlighted")},s.prototype.toggleDeleted=function(){var t;if(null!=this.showDeleted())return i.ajax(laroute.route("account.options"),{method:"PUT",data:{user_profile_customization:{forum_posts_show_deleted:!this.showDeleted()}}}).done((t=this,function(n){return i.publish("user:update",n),e.visit(t.postUrlN(t.currentPostPosition))}))},s.prototype.initialScrollTo=function(){if(""===location.hash&&null!=window.postJumpTo&&0!==window.postJumpTo)return this.scrollTo(window.postJumpTo),window.postJumpTo=0},s.prototype.postUrlClick=function(t){var e;return t.preventDefault(),e=i(t.target).closest(".js-forum-post").attr("data-post-id"),this.scrollTo(e)},s.prototype.postUrlN=function(t){return document.location.pathname+"?n="+t},s.prototype.showMore=function(e){var n,s,r;if(e.preventDefault(),!(n=e.currentTarget).classList.contains("js-disabled"))return n.classList.add("js-disabled"),s=this.moreMeta(n),i.get(s.url).done((r=this,function(e){var i,o,a,u,l,c,h,d,p,f,m,g;if(null==e)return n.dataset.noMore="1",void r.refreshLoadMoreLinks();if(d=(h=s.refPost).getBoundingClientRect().top,"previous"===s.mode?(n.insertAdjacentHTML("afterend",e),m=r.maxPosts,f=r.posts.length):(n.insertAdjacentHTML("beforebegin",e),m=0,f=r.posts.length-r.maxPosts),m<f)for(u=r.posts[0].parentNode,o=0,a=(c=t.slice(r.posts,m,f)).length;o<a;o++)l=c[o],u.removeChild(l);return r.refreshLoadMoreLinks(),g=window.pageXOffset,i=h.getBoundingClientRect().top,p=window.pageYOffset+i-d,window.scrollTo(g,p),osu.pageChange(),n.dataset.failed="0"})).always((function(){return n.classList.remove("js-disabled")})).fail((function(t){return n.dataset.failed="1",osu.ajaxError(t)}))},s.prototype.jumpToSubmit=function(t){if(t.preventDefault(),LoadingOverlay.hide(),this.jumpTo(i(t.target).find('[name="n"]').val()))return i.publish("forum:topic:jumpTo")},s.prototype.moreMeta=function(t){var e,n,s,r;return"previous"===(e=t.dataset.mode)?(s=this.posts[0],r="id_desc"):(s=this.endPost(),r="id_asc"),n=i.param({skip_layout:1,with_deleted:+this.showDeleted(),sort:r,cursor:{id:s.dataset.postId}}),{url:window.canonicalUrl+"?"+n,refPost:s,mode:e}},s}()}).call(window)}).call(this,n("Hs9Z"),n("dMdw"))},EVQW:function(t,e,n){n("5wds"),n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TwitchPlayer=function(){function e(e){this.turbolinksReload=e,this.openPlayer=t(this.openPlayer,this),this.noCookieDiv=t(this.noCookieDiv,this),this.start=t(this.start,this),this.startAll=t(this.startAll,this),this.initializeEmbed=t(this.initializeEmbed,this),this.playerDivs=document.getElementsByClassName("js-twitch-player"),addEventListener("turbolinks:load",this.startAll)}return e.prototype.initializeEmbed=function(){return this.turbolinksReload.load("https://player.twitch.tv/js/embed/v1.js",this.startAll)},e.prototype.startAll=function(){var t,e,n,i,s;if(0!==this.playerDivs.length){if("undefined"==typeof Twitch||null===Twitch)return this.initializeEmbed();for(s=[],e=0,n=(i=this.playerDivs).length;e<n;e++)t=i[e],s.push(this.start(t));return s}},e.prototype.start=function(t){var e,n;if(!t.dataset.twitchPlayerStarted)return t.dataset.twitchPlayerStarted=!0,e={width:"100%",height:"100%",channel:t.dataset.channel},new Twitch.Player(t.id,e).addEventListener(Twitch.Player.PLAY,(n=this,function(){return n.openPlayer(t)}))},e.prototype.noCookieDiv=function(t){return document.querySelector(".js-twitch-player--no-cookie[data-player-id='"+t+"']")},e.prototype.openPlayer=function(t){if(t.classList.contains("hidden"))return t.classList.remove("hidden"),Fade.out(this.noCookieDiv(t.id))},e}()}).call(window)},Eama:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a}));var i=n("0h6b"),s=n("cF9b"),r=n("/G9H"),o=n("0yP9");let a=class extends r.Component{constructor(){super(...arguments),this.controller=new o.a,this.keepSelectionInView=!1,this.ref=r.createRef(),this.handleChange=t=>{this.controller.updateQuery(t.target.value)},this.handleEsc=t=>{"Escape"===t.key&&this.controller.unselect(!0)},this.handleKeyDown=t=>{const e=t.key;"Enter"===e?null==this.controller.selectedItem?this.handleSearch():osu.navigate(Object(i.route)("wiki.show",{path:this.controller.selectedItem.path,locale:currentLocale})):"ArrowUp"!==e&&"ArrowDown"!==e||(this.keepSelectionInView=!0,this.controller.shiftSelectedIndex("ArrowDown"===e?1:-1))},this.handleMouseDown=t=>{null!=this.ref.current&&(t.composedPath().includes(this.ref.current)||this.controller.unselect(!0))},this.handleMouseLeave=()=>{this.controller.unselect(!1)},this.handleSearch=()=>{this.controller.search()}}componentDidMount(){document.addEventListener("keydown",this.handleEsc),document.addEventListener("mousedown",this.handleMouseDown)}componentDidUpdate(){var e;this.keepSelectionInView&&(null===(e=t(".wiki-search__suggestion--active")[0])||void 0===e||e.scrollIntoView({inline:"nearest",block:"nearest"}),this.keepSelectionInView=!1)}componentWillUnmount(){document.removeEventListener("keydown",this.handleEsc),document.removeEventListener("mousedown",this.handleMouseDown),this.controller.cancel()}render(){return r.createElement("div",{className:"wiki-search"},r.createElement("div",{className:"wiki-search__bar"},r.createElement("input",{autoFocus:!0,className:"wiki-search__input",onChange:this.handleChange,onKeyDown:this.handleKeyDown,placeholder:osu.trans("common.input.search"),value:this.controller.displayText}),r.createElement("button",{className:"wiki-search__button",onClick:this.handleSearch},r.createElement("i",{className:"fa fa-search"}))),this.renderSuggestions())}renderSuggestions(){return this.controller.isSuggestionsVisible?r.createElement("div",{ref:this.ref,className:"wiki-search__suggestions u-fancy-scrollbar",onMouseLeave:this.handleMouseLeave},this.controller.suggestions.map((t,e)=>{const n=Object(i.route)("wiki.show",{path:t.path,locale:currentLocale});return r.createElement("a",{key:e,className:osu.classWithModifiers("wiki-search__suggestion",this.controller.selectedIndex===e?["active"]:[]),href:n,onMouseEnter:()=>{this.keepSelectionInView=!1,this.controller.selectIndex(e)}},r.createElement("span",{dangerouslySetInnerHTML:{__html:t.highlight}}))})):null}};a=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([s.e],a)}).call(this,n("5wds"))},EhQP:function(t,e,n){n("5wds"),n("5wds");(function(){this.StoreSupporterTagPrice=function(){function t(t){this._price=t}return t.durationToPrice=function(t){switch(t=+t,!1){case!(t>=12):return Math.ceil(t/12*26);case 10!==t:return 24;case 9!==t:return 22;case 8!==t:return 20;case 6!==t:return 16;case 4!==t:return 12;case 2!==t:return 8;case 1!==t:return 4}},t.prototype.price=function(){return this._price},t.prototype.duration=function(){return null!=this._duration?this._duration:this._duration=function(){switch(!1){case!(this._price>=26):return Math.floor(this._price/26*12);case!(this._price>=24):return 10;case!(this._price>=22):return 9;case!(this._price>=20):return 8;case!(this._price>=16):return 6;case!(this._price>=12):return 4;case!(this._price>=8):return 2;case!(this._price>=4):return 1;default:return 0}}.call(this)},t.prototype.pricePerMonth=function(){return osu.formatNumber(this._price/this.duration(),2)},t.prototype.discount=function(){var t;return this.duration()>=12?46:(t=100*(1-this._price/this.duration()/4),Math.max(0,Math.round(t,0)))},t.prototype.discountText=function(){return osu.trans("store.discount",{percent:this.discount()})},t.prototype.durationInYears=function(){return{years:Math.floor(this.duration()/12),months:Math.floor(this.duration()%12)}},t.prototype.durationText=function(){var t,e;return e=[],(t=this.durationInYears()).years>0&&e.push(osu.transChoice("common.count.years",t.years)),t.months>0&&e.push(osu.transChoice("common.count.months",t.months)),e.join(", ")},t}()}).call(window)},FLFi:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ChangelogChartLoader=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),i(window).on("resize",this.resize),i(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-changelog-chart"),e.prototype.initialize=function(){if(null!=this.container[0])return this.container[0]._chart=new ChangelogChart(this.container[0]),this.container[0]._chart.loadData()},e.prototype.resize=function(){var t;return null!=(t=this.container[0])?t._chart.resize():void 0},e}()}).call(window)},FcZw:function(t,e,n){(function(t){n("5wds"),n("5wds");(function(){var e,n,i;n=document.getElementsByClassName("js-loading-overlay"),i=function(){if(0!==n.length)return n[0].classList.add("loading-overlay--visible")},i=t.debounce(i,5e3,{maxWait:5e3}),e=function(){if(0!==n.length)return i.cancel(),n[0].classList.remove("loading-overlay--visible")},this.LoadingOverlay={show:i,hide:e}}).call(window)}).call(this,n("Hs9Z"))},"Go/u":function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n,i,s;s=function(){return StoreCart.setEnabled(!1),e("#username-check-price").text("")},n=function(){var t,i;return t=e("#username-check-status"),i=e(".js-username-change-input").val(),e.post(laroute.route("users.check-username-availability"),{username:i}).done((function(n){if(n.username===e(".js-username-change-input").val())return n.available?(e(".js-store-add-to-cart").attr("disabled",!1),e("#username-check-price").text(n.costString),e("#username-form-price").val(n.cost),e("#product-form").data("disabled",!1)):s(),t.html(n.message),t.toggleClass("green-dark",n.available),t.toggleClass("pink-dark",!n.available)})).fail((function(t,i){return e(".js-username-change-input").trigger("ajax:error",[t,i]).one("click",n)}))},i=t.debounce(n,300),e(document).on("input",".js-username-change-input",(function(t){var n,r,o;return r=t.currentTarget,n=e("#username-check-status"),o=r.value,n.removeClass("green-dark"),n.removeClass("pink-dark"),s(),0===o.length?n.text(osu.trans("store.username_change.check")):(n.text(osu.trans("store.username_change.checking",{username:o})),i())})),e(document).on("turbolinks:load",(function(){if(0!==e(".js-username-change-input").length)return s()}))}).call(window)}).call(this,n("Hs9Z"))},HRtH:function(t,e,n){n("5wds");var i=n("5wds");(function(){i(document).on("ajax:success",".js-logout-link",(function(t,e){return localStorage.clear(),osu.reloadPage(),!0===(null!=e?e.captcha_triggered:void 0)?osuCore.captcha.trigger():osuCore.captcha.untrigger()}))}).call(window)},IBdx:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.TooltipBeatmap=function(){function i(){this.onMouseOver=n(this.onMouseOver,this),e(document).on("mouseover touchstart",".js-beatmap-tooltip",this.onMouseOver)}return i.prototype.tmpl=t.template('<div class="tooltip-beatmap__text tooltip-beatmap__text--title"><%- beatmapTitle %></div><div class="tooltip-beatmap__text" style="--diff: var(--diff-<%- difficulty %>)"><%- stars %> <i class="fas fa-star" aria-hidden="true"></i></div>'),i.prototype.onMouseOver=function(t){var n,i,s,r,o;if(null!=(s=t.currentTarget).dataset.beatmapTitle){if(i=this.tmpl(s.dataset),!s._tooltip)return n=null!=(o=s.dataset.tooltipPosition)?o:"top center",r={overwrite:!1,content:i,position:{my:function(){switch(n){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center"}}(),at:n,viewport:e(window)},show:{event:t.type,ready:!0},hide:{event:"click mouseleave"},style:{classes:"qtip tooltip-beatmap",tip:{width:10,height:9}}},"touchstart"===t.type&&(r.hide={inactive:3e3,event:"unfocus"}),e(s).qtip(r,t),s._tooltip=!0;e(s).qtip("set",{"content.text":i})}},i}()}).call(window)}).call(this,n("Hs9Z"))},ICEo:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicPostJump=function(){function e(e){this.forum=e,this.start=t(this.start,this),this.keyup=t(this.keyup,this),this.end=t(this.end,this),i(document).on("click",".js-forum-topic-post-jump--cover",this.start),i(document).on("blur",".js-forum-topic-post-jump--input",this.end),i(document).on("keyup",".js-forum-topic-post-jump--input",this.keyup),i.subscribe("forum:topic:jumpTo",this.end)}return e.prototype.end=function(){return i(".js-forum-topic-post-jump--container").removeClass("js-forum-topic-post-jump--container-focus"),i(".js-forum-topic-post-jump--cover").show(),i(".js-forum-topic-post-jump--counter").show(),i(".js-forum-topic-post-jump--input").hide()},e.prototype.keyup=function(t){var e,n,s;if(27!==t.keyCode){if(n=(s=(e=t.currentTarget).value).replace(/\D/g,""),s!==n)return e.value=n}else i(t.currentTarget).blur()},e.prototype.start=function(){var t;return i(".js-forum-topic-post-jump--container").addClass("js-forum-topic-post-jump--container-focus"),i(".js-forum-topic-post-jump--cover").hide(),i(".js-forum-topic-post-jump--counter").hide(),(t=i(".js-forum-topic-post-jump--input").val(this.forum.currentPostPosition).show().focus())[0].selectionStart=0,t[0].selectionEnd=t.val().length},e}()}).call(window)},JER7:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumPostsSeek=function(){function e(e){this.forum=e,this.setPostPosition=t(this.setPostPosition,this),this.reset=t(this.reset,this),this.jump=t(this.jump,this),this.click=t(this.click,this),this.move=t(this.move,this),this.hideTooltip=t(this.hideTooltip,this),this.tooltip=document.getElementsByClassName("js-forum-posts-seek--tooltip"),this.tooltipNumber=document.getElementsByClassName("js-forum-posts-seek-tooltip-number"),this.seekbar=document.getElementsByClassName("js-forum__posts-seek"),i(document).on("mousemove",".js-forum__posts-seek",this.move),i(document).on("mouseleave",".js-forum__posts-seek",this.hideTooltip),i(document).on("click",".js-forum__posts-seek",this.click),i(document).on("click",".js-forum-posts-seek--jump",this.jump),addEventListener("turbolinks:before-cache",this.reset)}return e.prototype.hideTooltip=function(){if(0!==this.tooltip.length)return Fade.out(this.tooltip[0])},e.prototype.move=function(t){return t.preventDefault(),t.stopPropagation(),this.setPostPosition(t.clientX),Fade.in(this.tooltip[0]),Timeout.clear(this._autohide),this._autohide=Timeout.set(1e3,this.hideTooltip)},e.prototype.click=function(){return this.forum.jumpTo(this.postPosition)},e.prototype.jump=function(t){var e,n,s,r,o,a,u,l;return t.preventDefault(),n=this.forum.currentPostPosition,l=this.forum.totalPosts(),e=i(t.currentTarget),r=e.attr("data-jump-target"),u=function(){switch(r){case"first":return 1;case"last":return l;case"previous":return s=n-10,a=this.forum.postPosition(this.forum.posts[0]),Math.max(s,a);case"next":return s=n+10,o=this.forum.postPosition(this.forum.endPost()),Math.min(s,o)}}.call(this),e.blur(),this.forum.jumpTo(u)},e.prototype.reset=function(){return Timeout.clear(this._autohide),this.hideTooltip()},e.prototype.setPostPosition=function(t){var e,n,i;return e=t/this.seekbar[0].offsetWidth,i=this.forum.totalPosts(),n=Math.ceil(e*this.forum.totalPosts()),n=Math.min(n,i),this.postPosition=Math.max(n,1),this.tooltip[0].style.transform="translateX("+t+"px)",this.tooltipNumber[0].textContent=this.postPosition},e}()}).call(window)},JXhK:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.StoreSupporterTag=function(){function i(i){var s;this.updateUserInteraction=n(this.updateUserInteraction,this),this.updateTargetId=n(this.updateTargetId,this),this.updateSearchResult=n(this.updateSearchResult,this),this.updateCostDisplay=n(this.updateCostDisplay,this),this.onInput=n(this.onInput,this),this.onSliderValueChanged=n(this.onSliderValueChanged,this),this.calculate=n(this.calculate,this),this.getUser=n(this.getUser,this),this.initializeUsernameInput=n(this.initializeUsernameInput,this),this.initializeSliderPresets=n(this.initializeSliderPresets,this),this.initializeSlider=n(this.initializeSlider,this),this.debouncedGetUser=t.debounce(this.getUser,300),this.el=i,this.searching=!1,this.priceElement=this.el.querySelector(".js-price"),this.durationElement=this.el.querySelector(".js-duration"),this.discountElement=this.el.querySelector(".js-discount"),this.slider=this.el.querySelector(".js-slider"),this.sliderPresets=this.el.querySelectorAll(".js-slider-preset"),this.targetIdElement=this.el.querySelector('input[name="item[extra_data][target_id]"]'),this.usernameInput=this.el.querySelector(".js-username-input"),this.reactElement=this.el.querySelector(".js-react--user-card-store"),null==this.reactElement.dataset.user?(this.user=currentUser,this.reactElement.dataset.user=JSON.stringify(this.user)):this.user=JSON.parse(this.reactElement.dataset.user),e(document).on("turbolinks:before-cache.store-supporter-tag",(s=this,function(){return s.reactElement.dataset.user=JSON.stringify(s.user),e(document).off(".store-supporter-tag")})),this.cost=this.calculate(this.initializeSlider().slider("value")),this.initializeSliderPresets(),this.initializeUsernameInput(),this.updateCostDisplay(),this.updateSearchResult()}return i.prototype.RESOLUTION=8,i.prototype.MIN_VALUE=4,i.prototype.MAX_VALUE=52,i.initialize=function(){var t,e,n,s,r;for(r=[],e=0,n=(s=document.getElementsByClassName("js-store-supporter-tag")).length;e<n;e++)t=s[e],r.push(new i(t));return r},i.prototype.initializeSlider=function(){var t;return e(this.slider).find(".ui-slider-range").remove(),e(this.slider).slider({range:"min",value:null!=(t=this.slider.dataset.lastValue)?t:this.sliderValue(this.MIN_VALUE),min:this.sliderValue(this.MIN_VALUE),max:this.sliderValue(this.MAX_VALUE),step:1,animate:!0,slide:this.onSliderValueChanged,change:this.onSliderValueChanged})},i.prototype.initializeSliderPresets=function(){return e(this.sliderPresets).on("click",(t=this,function(n){var i,s;if(s=n.currentTarget,i=StoreSupporterTagPrice.durationToPrice(s.dataset.months))return e(t.slider).slider("value",t.sliderValue(i))}));var t},i.prototype.initializeUsernameInput=function(){return e(this.usernameInput).on("input",this.onInput)},i.prototype.getUser=function(t){return t?e.ajax({data:{username:t},dataType:"json",type:"POST",url:laroute.route("users.check-username-exists")}).done((n=this,function(t){return n.user=t})).fail(function(t){return function(n,i){return e(t.usernameInput).trigger("ajax:error",[n,i]).one("click",t.onInput)}}(this)).always(function(t){return function(){return t.searching=!1,t.updateSearchResult()}}(this)):(this.user=window.currentUser,this.searching=!1,void this.updateSearchResult());var n},i.prototype.calculate=function(t){return new StoreSupporterTagPrice(Math.floor(t/this.RESOLUTION))},i.prototype.onSliderValueChanged=function(t,e){return this.slider.dataset.lastValue=e.value,this.cost=this.calculate(e.value),this.updateCostDisplay()},i.prototype.onInput=function(t){return this.searching||(this.searching=!0,this.user=null,this.updateSearchResult()),this.debouncedGetUser(t.currentTarget.value)},i.prototype.sliderValue=function(t){return t*this.RESOLUTION},i.prototype.updateCostDisplay=function(){var t,e,n,i,s;for(this.el.querySelector('input[name="item[cost]"]').value=this.cost.price(),this.priceElement.textContent="USD "+this.cost.price(),this.durationElement.textContent=this.cost.durationText(),this.discountElement.textContent=this.cost.discountText(),s=[],e=0,n=(i=this.sliderPresets).length;e<n;e++)t=i[e],s.push(this.updateSliderPreset(t,this.cost));return s},i.prototype.updateSearchResult=function(){return e.publish("store-supporter-tag:update-user",this.user),this.updateTargetId(),this.updateUserInteraction()},i.prototype.updateSliderPreset=function(t,n){return e(t).toggleClass("js-slider-preset--active",n.duration()>=+t.dataset.months)},i.prototype.updateTargetId=function(){var t;return this.targetIdElement.value=null!=(t=this.user)?t.id:void 0},i.prototype.updateUserInteraction=function(){var t,n;return t=null!=(null!=(n=this.user)?n.id:void 0)&&Number.isFinite(this.user.id)&&this.user.id>0,StoreCart.setEnabled(t),e(this.el).toggleClass("js-store--disabled",!t),e(".js-slider").slider({disabled:!t})},i}()}).call(window)}).call(this,n("Hs9Z"))},K1Kf:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t;i(document).on("click","#new-address-switch a",(function(t){var e,n;return t.preventDefault(),n=i(t.target),e=i("#new-address-form"),n.is(":visible")?(n.siblings("button").show(),n.hide(),e.find("input").first().focus()):(n.siblings("button").hide(),n.show()),e.slideToggle()})),t=function(){return i(".js-checkout-confirmation-step").filter(":checked")},i(document).on("turbolinks:load",t),i(document).on("change",".js-checkout-confirmation-step",t),i(document).on("turbolinks:load",(function(){if(!(parseInt(i(".js-store-item-quantity").val(),10)>0))return i(".js-store-add-to-cart").hide()})),i(document).on("turbolinks:load",(function(){return i("#product-form").submit((function(t){return!i(t.target).data("disabled")}))}))}).call(window)},Kd0U:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty;this.FormError=function(){function s(){this.setOneError=n(this.setOneError,this),this.setError=n(this.setError,this),this.showError=n(this.showError,this),this.flattenData=n(this.flattenData,this),this.clearError=n(this.clearError,this),e(document).on("ajax:error",".js-form-error",this.showError),e(document).on("ajax:success",".js-form-error",this.clearError)}return s.prototype.clearError=function(t){return this.setError(t.target)},s.prototype.flattenData=function(e,n){var s,r,o,a,u,l,c,h;for(u in null==n&&(n=[]),s={},e)if(i.call(e,u))if(h=e[u],Array.isArray(h)){for(r="",o=a=0,l=n.length;a<l;o=++a)c=n[o],r+=0===o?c:"["+c+"]";s[r+=""===r?u:"["+u+"]"]=h}else h instanceof Object&&t.merge(s,this.flattenData(h,n.concat(u)));return s},s.prototype.showError=function(t,e){var n,i;return null==(n=null!=(i=e.responseJSON)?i.form_error:void 0)?osu.ajaxError(e):this.setError(t.target,this.flattenData(n))},s.prototype.setError=function(t,n){return null==n&&(n={}),e(t).find("[name]").each((i=this,function(t,e){return i.setOneError(e,n[e.name])}));var i},s.prototype.setOneError=function(t,n){var i;return null==n&&(n=[]),i=n.length>0?"error":"",e(t).closest("label, .js-form-error--field").attr("data-form-error-state",i).find(".js-form-error--error").text(n.join(" "))},s}()}).call(window)}).call(this,n("Hs9Z"))},L6Lm:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.LandingGraph=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),i(window).on("resize",this.resize),i(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-landing-graph"),e.prototype.initialize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0])._chart?t._chart:t._chart=new LandingUserStats},e.prototype.resize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0]._chart)?t.resize():void 0},e}()}).call(window)},LgLm:function(t,e,n){(function(t,e){n("5wds");var i=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.Search=function(){function s(){this.restoreFocus=n(this.restoreFocus,this),this.searchingToggle=n(this.searchingToggle,this),this.submit=n(this.submit,this),this.submitForm=n(this.submitForm,this),this.submitInput=n(this.submitInput,this),this.maybeSubmitInput=n(this.maybeSubmitInput,this),this.forumPostReset=n(this.forumPostReset,this),this.debouncedSubmitInput=t.debounce(this.submitInput,500),i(document).on("click",".js-search--forum-options-reset",this.forumPostReset),i(document).on("input",".js-search--input",this.debouncedSubmitInput),i(document).on("keydown",".js-search--input",this.maybeSubmitInput),i(document).on("submit",".js-search",this.submitForm),addEventListener("turbolinks:load",this.restoreFocus)}return s.prototype.forumPostReset=function(){var t;return(t=i(".js-search")).find("[name=username], [name=forum_id]").val(""),t.find("[name=forum_children]").prop("checked",!1)},s.prototype.maybeSubmitInput=function(t){if(13===t.keyCode)return t.preventDefault(),this.submitInput(t)},s.prototype.submitInput=function(t){var e,n,i;if(""!==(i=(e=t.currentTarget).value.trim())&&i!==(null!=(n=e.dataset.searchCurrent)?n.trim():void 0))return e.dataset.searchCurrent=i,this.submit()},s.prototype.submitForm=function(t){return t.preventDefault(),this.submit()},s.prototype.submit=function(){var t,n;return this.searchingToggle(!0),t=i(".js-search").serialize(),i(document).one("turbolinks:before-cache",(n=this,function(){return n.activeElement=document.activeElement,n.searchingToggle(!1)})),e.visit("?"+t)},s.prototype.searchingToggle=function(t){return i(".js-search--header").toggleClass("js-search--searching",t)},s.prototype.restoreFocus=function(){var t;return null!=(t=this.activeElement)&&t.focus(),this.activeElement=null},s}()}).call(window)}).call(this,n("Hs9Z"),n("dMdw"))},Lv69:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var i=n("/G9H"),s=n("I8Ok"),r=n("MeXQ"),o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,u=function(e){function n(){return this.renderOption=o(this.renderOption,this),this.render=o(this.render,this),this.handleChange=o(this.handleChange,this),n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.handleChange=function(e){return t.visit(this.href(e.id))},n.prototype.href=function(t){return window.osu.updateQueryString(null,{spotlight:t})},n.prototype.render=function(){return Object(i.createElement)(r.a,{bn:"spotlight-select-options",renderOption:this.renderOption,onChange:this.handleChange,options:this.props.options,selected:this.props.selected})},n.prototype.renderOption=function(t){var e,n,i,r;return e=t.children,n=t.cssClasses,i=t.onClick,r=t.option,Object(s.a)({children:e,className:n,href:this.href(null!=r?r.id:void 0),key:null!=r?r.id:void 0,onClick:i})},n}(i.PureComponent)}).call(this,n("dMdw"))},MFi3:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var i=n("/G9H"),s=n("WKXC"),r=n("mnuU");class o{constructor(e,n){this.destroy=()=>{Object(s.unmountComponentAtNode)(this.root),t(document).off(`.${this.eventId}`)},this.root=e.querySelector(".js-pswp-buttons"),Object(s.render)(Object(i.createElement)(r.a,{pswp:n}),this.root),this.eventId=`gallery-contest-${osu.uuid()}`,t(document).on(`turbolinks:before-cache.${this.eventId}`,this.destroy),n.listen("destroy",this.destroy)}}}).call(this,n("5wds"))},MRAD:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.PostPreview=function(){function i(){var i;this.loadPreview=n(this.loadPreview,this),this.debouncedLoadPreview=t.debounce(this.loadPreview,500),e(document).on("input",".js-post-preview--auto",(i=this,function(t){return i.debouncedLoadPreview(t.currentTarget)}))}return i.prototype.loadPreview=function(t){var n,i,s,r,o,a;if(n=e(t).closest("form"),r=t.value,o=(i=n.find(".js-post-preview--preview"))[0],s=n.find(".js-post-preview--box"),null!=o)if(null!=(a=o._xhr)&&a.abort(),""!==r){if(i.attr("data-raw")!==r)return o._xhr=e.post(laroute.route("bbcode-preview"),{text:r}).done((function(t){return i.html(t),i.attr("data-raw",r),s.removeClass("hidden"),osu.pageChange()}));s.removeClass("hidden")}else s.addClass("hidden")},i}()}).call(window)}).call(this,n("Hs9Z"))},MWnb:function(t,e,n){(function(t,e){n("5wds"),n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty;this.StackedBarChart=function(){function s(e,i){var s,r,o,a,u,l,c;for(this.area=e,this.options=null!=i?i:{},this.resize=n(this.resize,this),this.reattach=n(this.reattach,this),this.margins={top:0,right:0,bottom:0,left:0},null==(s=this.options).scales&&(s.scales={}),null==(r=this.options.scales).x&&(r.x=t.scaleLinear()),null==(o=this.options.scales).y&&(o.y=t.scaleLinear()),a="stacked-bar-chart",u=0,l=(c=this.options.modifiers).length;u<l;u++)a+=" stacked-bar-chart--"+c[u];this.svg=t.select(this.area).append("svg").attr("class",a),this.svgWrapper=this.svg.append("g")}return s.prototype.loadData=function(n){var s,r,o,a,u,l;for(o in this.data=[],n)if(i.call(n,o))for(u in a=n[o])i.call(a,u)&&(l=a[u],null==(s=this.data)[u]&&(s[u]=[]),r=e.last(this.data[u]),this.data[u].push({type:o,value:l,height:null!=r?r.value+r.height:0}));return this.max=t.max(e.map(this.data,(function(t){return e.sumBy(t,"value")}))),this.resize()},s.prototype.reattach=function(t){if(null!=t&&t!==this.area)return this.area=t,this.area.append(this.svg.node())},s.prototype.setDimensions=function(){var t;return t=this.area.getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},s.prototype.setScalesRange=function(){return this.options.scales.x.range([0,this.width]).domain([0,this.data.length]),this.options.scales.y.range([0,this.height]).domain([0,Math.max(this.max,1)])},s.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},s.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},s.prototype.drawBars=function(){var t,e,n;return(e=this.svgWrapper.selectAll("g").data(this.data)).enter().append("g"),e.attr("transform",(n=this,function(t,e){return"translate("+n.options.scales.x(e)+", 0)"})),(t=e.selectAll(".stacked-bar-chart__bar").data((function(t){return t}))).enter().append("rect").attr("class",(function(t){return"stacked-bar-chart__bar stacked-bar-chart__bar--"+t.type})).attr("width",this.options.scales.x(1)).attr("y",this.height),t.transition().attr("y",function(t){return function(e){return t.height-t.options.scales.y(e.value+e.height)}}(this)).attr("height",function(t){return function(e){return t.options.scales.y(e.value)}}(this)),t.exit().remove(),e.exit().remove()},s.prototype.resize=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.drawBars()},s}()}).call(window)}).call(this,n("q3Jf"),n("Hs9Z"))},NnvF:function(t,e,n){"use strict";var i=n("EaLk"),s=n("cF9b"),r=n("JlDh"),o=n("f4vq"),a=n("/G9H"),u=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};let l=class extends a.Component{get unreadCount(){return r.c.filter(t=>!(null==t||"channel"===t)).reduce((t,e)=>t+o.a.dataStore.notificationStore.unreadStacks.getOrCreateType({objectType:e}).total,0)}render(){return a.createElement("span",{className:this.mainClass()},a.createElement("i",{className:"fas fa-inbox"}),a.createElement("span",{className:"notification-icon__count"},this.unreadCountDisplay()))}mainClass(){let t="notification-icon";return this.unreadCount>0&&(t+=" notification-icon--glow"),"mobile"===this.props.type&&(t+=" notification-icon--mobile"),t}unreadCountDisplay(){return o.a.notificationsWorker.hasData?osu.formatNumber(this.unreadCount):"..."}};u([i.e],l.prototype,"unreadCount",null),l=u([s.e],l),e.a=l},"Nqw+":function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEditAvatar=function(){function e(){this.rollback=t(this.rollback,this),this.overlayStart=t(this.overlayStart,this),this.overlayLeave=t(this.overlayLeave,this),this.overlayHover=t(this.overlayHover,this),this.overlayEnter=t(this.overlayEnter,this),this.overlayEnd=t(this.overlayEnd,this),this.initialize=t(this.initialize,this),i(document).on("turbolinks:load",this.initialize),i(document).on("turbolinks:before-cache",this.rollback),i.subscribe("dragenterGlobal",this.overlayStart),i.subscribe("dragendGlobal",this.overlayEnd),i(document).on("dragenter",".js-account-edit-avatar",this.overlayEnter),i(document).on("dragover",".js-account-edit-avatar",this.overlayHover),this.main=document.getElementsByClassName("js-account-edit-avatar")}return e.prototype.$button=function(){return i(".js-account-edit-avatar__button")},e.prototype.initialize=function(){var t;if(null!=this.main[0])return this.isAvailable=!0,this.$main=i(this.main),this.$button().fileupload({url:laroute.route("account.avatar"),dataType:"json",dropZone:this.$main,submit:(t=this,function(){return t.main[0].classList.add("js-account-edit-avatar--saving"),i.publish("dragendGlobal")}),done:function(t,e){return i.publish("user:update",e.result)},fail:_exported.fileuploadFailCallback,complete:function(t){return function(){return t.main[0].classList.remove("js-account-edit-avatar--saving")}}(this)})},e.prototype.overlayEnd=function(){if(this.isAvailable)return this.main[0].classList.remove("js-account-edit-avatar--start")},e.prototype.overlayEnter=function(){return null!=this.dragging?this.dragging:this.dragging=!0},e.prototype.overlayHover=function(){if(this.dragging)return this.main[0].classList.add("js-account-edit-avatar--hover"),Timeout.clear(this.overlayLeaveTimeout),this.overlayLeaveTimeout=Timeout.set(100,this.overlayLeave)},e.prototype.overlayLeave=function(){return this.dragging=null,this.main[0].classList.remove("js-account-edit-avatar--hover")},e.prototype.overlayStart=function(){if(this.isAvailable)return this.main[0].classList.add("js-account-edit-avatar--start")},e.prototype.rollback=function(){if(this.isAvailable)return this.isAvailable=!1,this.$button().fileupload("destroy")},e}()}).call(window)},NrCJ:function(t,e,n){"use strict";(function(t,i){var s=n("MFi3"),r=n("+aIE"),o=n.n(r),a=n("VZ9T"),u=n.n(a),l=function(t,e){return function(){return t.apply(e,arguments)}};e.a=function(){function e(){this.switchPreview=l(this.switchPreview,this),this.thumbBoundsFn=l(this.thumbBoundsFn,this),this.open=l(this.open,this),this.initiateOpen=l(this.initiateOpen,this),this.container=document.getElementsByClassName("pswp"),t(document).on("click",".js-gallery",this.initiateOpen),t(document).on("click",".js-gallery-thumbnail",this.switchPreview),t(document).on("turbolinks:before-cache",(function(){return t(".js-gallery--container").remove()}))}return e.prototype.initiateOpen=function(e){var n,i,s;if(!(n=t(e.currentTarget)).parents("a").length)return e.preventDefault(),s=parseInt(n.attr("data-index"),10),i=n.attr("data-gallery-id"),this.open({galleryId:i,index:s})},e.prototype.open=function(e){var n,r,a,l;return r=e.galleryId,a=e.index,(n=this.container[0].cloneNode(!0)).classList.add("js-gallery--container"),document.body.appendChild(n),l=new o.a(n,u.a,this.data(r),{showHideOpacity:!0,getThumbBoundsFn:this.thumbBoundsFn(r),index:a,history:!1,timeToIdle:null}),i.startsWith(r,"contest-")&&new s.a(n,l),l.init(),t(document).one("gallery:close",(function(){try{return l.close()}catch(t){}}))},e.prototype.data=function(t){var e,n,i,s,r,o,a;for(o=[],n=0,i=(s=document.querySelectorAll(".js-gallery[data-gallery-id='"+t+"']")).length;n<i;n++)a=null!=(r=(e=s[n]).getAttribute("data-src"))?r:e.getAttribute("href"),o.push({element:e,msrc:a,src:a,w:parseInt(e.getAttribute("data-width"),10),h:parseInt(e.getAttribute("data-height"),10)});return o},e.prototype.thumbBoundsFn=function(e){return function(n){var i,s,r,o,a,u,l;return l=(i=t(".js-gallery[data-gallery-id='"+e+"'][data-index='"+n+"']")).offset(),u=[i.width(),i.height()],s=[l.left+u[0]/2,l.top+u[1]/2],r=[parseInt(i.attr("data-width"),10),parseInt(i.attr("data-height"),10)],o=Math.max(u[0]/r[0],u[1]/r[1]),a=r.map((function(t){return t*o})),{x:s[0]-a[0]/2,y:s[1]-a[1]/2,w:a[0]}}},e.prototype.switchPreview=function(e){var n,s,r,o,a,u,l,c,h,d;for(e.preventDefault(),r=(c=t(e.currentTarget)[0].dataset).galleryId,o=c.index,s=t(".js-gallery[data-gallery-id='"+r+"']"),n=t(".js-gallery-thumbnail[data-gallery-id='"+r+"']"),d=[],a=0,u=(h=i.zip(n,s)).length;a<u;a++)o===(l=h[a])[0].dataset.index?(l[0].classList.add("js-gallery-thumbnail--active"),d.push(Fade.in(l[1]))):(l[0].classList.remove("js-gallery-thumbnail--active"),d.push(Fade.out(l[1])));return d},e}()}).call(this,n("5wds"),n("Hs9Z"))},"Ny+b":function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TurbolinksUjs=function(){function e(){this.record=t(this.record,this),this.abort=t(this.abort,this),this.xhr=[],i(document).on("ajax:beforeSend",this.record),i(document).on("turbolinks:before-cache",this.abort)}return e.prototype.abort=function(){var t,e;for(t=[];e=this.xhr.pop();)t.push(null!=e?e.abort():void 0);return t},e.prototype.record=function(t,e){return this.xhr.push(e)},e}()}).call(window)},Os89:function(t,e,n){n("5wds");var i=n("5wds");(function(){i(document).on("click",".js-spoilerbox__link",(function(t){return t.preventDefault(),i(t.target).closest(".js-spoilerbox").toggleClass("js-spoilerbox--open"),osu.pageChange()}))}).call(window)},PBOi:function(t,e,n){(function(t,e,i){n("5wds"),n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;this.ChangelogChart=function(){function r(e){var i;this.resize=n(this.resize,this),this.positionTooltip=n(this.positionTooltip,this),this.moveTooltip=n(this.moveTooltip,this),this.hideTooltip=n(this.hideTooltip,this),this.showTooltip=n(this.showTooltip,this),this.options={scales:{x:t.scaleTime(),y:t.scaleLinear(),class:t.scaleOrdinal()}},this.area=t.select(e),this.area.classed("changelog-chart",!0),this.svg=this.area.append("svg"),this.svgWrapper=this.svg.append("g"),this.areaFunction=t.area().curve(t.curveMonotoneX).x((i=this,function(t){return i.options.scales.x(t.data.date)})).y1(function(t){return function(e){return t.options.scales.y(e[1])}}(this)).y0(function(t){return function(e,n){return t.options.scales.y(e[0])}}(this)),this.hoverArea=this.svg.append("rect").classed("changelog-chart__hover-area",!0).on("mouseout",this.hideTooltip).on("mousemove",this.moveTooltip),this.tooltipArea=this.area.append("div").classed("changelog-chart__tooltip-area",!0),this.tooltipContainer=this.tooltipArea.append("div").classed("changelog-chart__tooltip-container",!0).attr("data-visibility","hidden"),this.tooltipContainer.append("div").classed("changelog-chart__tooltip-line",!0),this.tooltip=this.tooltipContainer.append("div").classed("changelog-chart__tooltip",!0),this.tooltipName=this.tooltip.append("div"),this.tooltipUserCount=this.tooltip.append("div").classed("changelog-chart__text changelog-chart__text--user-count",!0),this.tooltipDate=this.tooltip.append("div").classed("changelog-chart__text changelog-chart__text--date",!0),this.tooltipContainer.append("div").classed("changelog-chart__tooltip-line",!0),this.tooltipLine=this.tooltipContainer.selectAll(".changelog-chart__tooltip-line")}return r.prototype.loadData=function(){var e,n,i,s;return this.config=osu.parseJson("json-chart-config"),e=(i=this.normalizeData(this.config.build_history)).data,n=i.hasData,s=t.stack().keys(this.config.order).value((function(t,e){return null!=t[e]?t[e].normalized:0})),this.data=s(e),this.hasData=null!=this.config.build_history&&this.config.build_history.length>0&&n,this.resize()},r.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width,this.height=t.height},r.prototype.setSvgSize=function(){return this.svg.attr("width",this.width).attr("height",this.height)},r.prototype.setHoverAreaSize=function(){return this.hoverArea.attr("width",this.width).attr("height",this.height)},r.prototype.setScalesRange=function(){var t,n,i;return this.options.scales.x.range([0,this.width]).domain([null!=(t=e.first(this.data[0]))?t.data.date:void 0,null!=(n=e.last(this.data[0]))?n.data.date:void 0]),this.options.scales.y.range([0,this.height]).domain([0,1]),this.options.scales.class.range(e.map(this.config.order,(i=this,function(t,n){return null!=i.config.stream_name?i.config.stream_name+"-build-"+n%7:e.kebabCase(t)}))).domain(this.config.order)},r.prototype.drawLines=function(){return this.svgWrapper.selectAll("g").data(this.data).enter().append("path").attr("class",(t=this,function(e){return"changelog-chart__area changelog-chart__area--"+t.options.scales.class(e.key)})).attr("d",this.areaFunction);var t},r.prototype.showTooltip=function(){return Fade.in(this.tooltipContainer.node())},r.prototype.hideTooltip=function(){return Fade.out(this.tooltipContainer.node())},r.prototype.moveTooltip=function(){var e;return e=t.mouse(this.hoverArea.node()),this.x=this.options.scales.x.invert(e[0]),this.y=e[1]/this.height,this.showTooltip(),Timeout.clear(this._autoHideTooltip),this._autoHideTooltip=Timeout.set(3e3,this.hideTooltip),this.positionTooltip()},r.prototype.positionTooltip=function(){var e,n,i,s,r,o,a,u,l,c,h,d,p,f,m;if(f=this.x,m=this.y,l=t.bisector((function(t){return t.data.date})).left(this.data[0],f)){for(r=o=0,u=(c=this.data).length;o<u;r=++o)if(m<=(s=c[r])[l][1]&&null!=s[l].data[s.key]){i=r,n=s.key,a=this.options.scales.class(n);break}return e=this.options.scales.x(f),this.tooltipName.attr("class","changelog-chart__text changelog-chart__text--name changelog-chart__text--"+a).text(n),this.tooltipUserCount.text(osu.formatNumber(this.data[i][l].data[n].user_count)),this.tooltipDate.text(this.data[i][l].data.date_formatted),d=(p=e-(h=this.tooltip.node().getBoundingClientRect().width)/2)<0?0:p+h>this.width?this.width-h:p,this.tooltip.style("transform","translateX("+d+"px)"),this.tooltipLine.style("transform","translateX("+e+"px)")}},r.prototype.resize=function(){if(this.area.classed("hidden",!this.hasData),this.hasData)return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setHoverAreaSize(),this.drawLines(),this.positionTooltip()},r.prototype.normalizeData=function(t){var n,r,o,a,u,l,c,h,d;return u=null,r=null,{data:function(){var p,f,m,g;for(c in g=[],m=e.groupBy(t,"created_at"))if(s.call(m,c)){for(d=m[c],0===(l=e.sumBy(d,"user_count"))?(null!=u&&(n=e.find(d,{label:u})),null==n&&(n=e.last(d),u=n.label),n.user_count=1,l=1):null==r&&(r=!0),o=i(d[0].created_at),a={created_at:c,date:o.toDate(),date_formatted:o.format("YYYY/MM/DD")},p=0,f=d.length;p<f;p++)(h=d[p]).normalized=h.user_count/l,a[h.label]=h;g.push(a)}return g}(),hasData:r}},r}()}).call(window)}).call(this,n("q3Jf"),n("Hs9Z"),n("7EfK"))},Q9e0:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.StickyFooter=function(){function i(){this.stickOrUnstick=n(this.stickOrUnstick,this),this.stickMarker=document.getElementsByClassName("js-sticky-footer"),this.permanentFixedFooter=document.getElementsByClassName("js-permanent-fixed-footer"),this.throttledStickOrUnstick=t.throttle(this.stickOrUnstick,100),e(window).on("scroll resize",this.stickOrUnstick),e.subscribe("stickyFooter:check",this.throttledStickOrUnstick),e(document).on("turbolinks:load",this.throttledStickOrUnstick),e.subscribe("osu:page:change",this.throttledStickOrUnstick)}return i.prototype.stickOrUnstick=function(){var t,n,i,s,r;if(0!==this.stickMarker.length){for(t=window.innerHeight-this.permanentFixedFooter[0].offsetHeight,n=0,i=(r=this.stickMarker).length;n<i;n++)if("1"!==(s=r[n]).getAttribute("data-sticky-footer-disabled")&&s.getBoundingClientRect().top>=t)return void e.publish("stickyFooter",s.getAttribute("data-sticky-footer-target"));return e.publish("stickyFooter")}},i.prototype.markerCheckEnabled=function(t){return"1"===t.getAttribute("data-sticky-footer-disabled")},i.prototype.markerDisable=function(t){return t.setAttribute("data-sticky-footer-disabled","1")},i.prototype.markerEnable=function(t){return t.setAttribute("data-sticky-footer-disabled","")},i}()}).call(window)}).call(this,n("Hs9Z"))},QDFN:function(t,e,n){"use strict";n.r(e);n("lhFD"),n("QT2p"),n("Nqw+"),n("vqYE"),n("TgbU"),n("bTZw"),n("y0Iw"),n("YEnZ"),n("0tzJ"),n("VAqo"),n("oWhP"),n("FLFi"),n("PBOi"),n("6FbF"),n("wuZa"),n("exjS"),n("E+Th"),n("pAZq"),n("xHv7"),n("sWOL"),n("Kd0U"),n("pVrk"),n("t+h0"),n("byFe"),n("jepR"),n("JER7"),n("ICEo"),n("6TQG"),n("pt+B"),n("o5lo"),n("E/7X"),n("tTWz"),n("Y4VH"),n("+3o9"),n("L6Lm"),n("WK7C"),n("2uEk"),n("FcZw"),n("icRW"),n("UaOV"),n("U4GN"),n("auMk"),n("MRAD"),n("upGs"),n("LgLm"),n("MWnb"),n("Q9e0"),n("lPUA"),n("5ASV"),n("EhQP"),n("JXhK"),n("gfK4"),n("7mzp"),n("WHzX"),n("IBdx"),n("9put"),n("Ny+b"),n("EVQW"),n("6Z8S"),n("yP+D"),n("Os89"),n("K1Kf"),n("Go/u"),n("CFbt"),n("rEDz"),n("8DVv"),n("38ot"),n("HRtH"),n("5hXa"),n("snad"),n("sebX");var i=n("dUQf"),s=n("NrCJ"),r=n("0h6b"),o=n("AOHe"),a=n("srfr"),u=n("bucr"),l=n("/jJF"),c=n("iH//"),h=n("phBA");null==window.Promise&&(window.Promise=a.a),window.Fade=i.a,null==window.gallery&&(window.gallery=new s.a),window._exported={OsuUrlHelper:u.a,discussionLinkify:c.a,fileuploadFailCallback:l.b,make2x:h.c},null==window.laroute&&(window.laroute=r),window._styles={header:{height:90,heightSticky:50,heightMobile:50}},window.StoreCheckout=o.a;n("f4vq"),n("hTA1"),n("T0kv")},QT2p:function(t,e,n){"use strict";(function(t){var e,i=n("5wds"),s=(n("9A9O"),n("W4WA"),n("1c9v"),n("vF7a"),n("eOdp"),n("sko/"),n("fVZi"),n("wrYU"),n("QIti"),n("ijPu"),n("7EVi"),n("TgW3"),n("/nYO"),n("nLpH")),r=n.n(s),o=n("7EfK");window.$=i,window.jQuery=i,null!==(e=window.LangMessages)&&void 0!==e||(window.LangMessages={}),window.Lang=new r.a({messages:window.LangMessages}),window.moment=o,window.Turbolinks=t}).call(this,n("dMdw"))},Qyfa:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var i,s=n("/G9H"),r=n("WKXC"),o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;i=function(t){return null!=t.dataset.turbolinksPermanent&&""!==t.id};var u=function(){function e(e){this.components=null!=e?e:{},this.scrollOnNewVisit=o(this.scrollOnNewVisit,this),this.registerPersistent=o(this.registerPersistent,this),this.register=o(this.register,this),this.onWindowScroll=o(this.onWindowScroll,this),this.onLoad=o(this.onLoad,this),this.onBeforeVisit=o(this.onBeforeVisit,this),this.onBeforeCache=o(this.onBeforeCache,this),this.destroyPersisted=o(this.destroyPersisted,this),this.destroy=o(this.destroy,this),this.boot=o(this.boot,this),this.allTargets=o(this.allTargets,this),this.documentReady=!1,this.targets=new Set,this.newVisit=!0,this.scrolled=!1,t(document).on("turbolinks:before-cache",this.onBeforeCache),t(document).on("turbolinks:before-visit",this.onBeforeVisit),t(document).on("turbolinks:load",this.onLoad)}return e.prototype.allTargets=function(t){var e,n,i,s,r;for(n in s=[],i=this.components)a.call(i,n)&&(e=i[n],s.push(function(){var i,s,o,a;for(a=[],i=0,s=(o=e.targets).length;i<s;i++)r=o[i],a.push(t({name:n,component:e,target:r}));return a}()));return s},e.prototype.boot=function(){var t;if(this.documentReady)return this.allTargets((t=this,function(e){var n,i;if(i=e.target,n=e.component,!t.targets.has(i))return t.targets.add(i),r.render(s.createElement(n.element,n.propsFunction(i)),i)}))},e.prototype.destroy=function(){return this.allTargets((t=this,function(e){var n,s;if(s=e.target,n=e.component,!i(s)&&t.targets.has(s)&&!n.persistent)return r.unmountComponentAtNode(s)}));var t},e.prototype.destroyPersisted=function(){var t,e;for(e of(t=[],this.targets.values()))i(e)&&document.body.contains(e)||(r.unmountComponentAtNode(e),t.push(this.targets.delete(e)));return t},e.prototype.onBeforeCache=function(){return Timeout.clear(this.scrollTimeout),this.documentReady=!1,this.destroy()},e.prototype.onBeforeVisit=function(){return this.newVisit=!0},e.prototype.onLoad=function(){return this.scrolled=!1,t(window).off("scroll",this.onWindowScroll),t(window).on("scroll",this.onWindowScroll),Timeout.set(1,(e=this,function(){return e.destroyPersisted(),e.documentReady=!0,e.boot(),e.scrollTimeout=Timeout.set(100,e.scrollOnNewVisit)}));var e},e.prototype.onWindowScroll=function(){return this.scrolled=this.scrolled||0!==window.scrollX||0!==window.scrollY},e.prototype.register=function(t,e,n){return null==n&&(n=function(){}),this.registerPersistent(t,e,!1,n)},e.prototype.registerPersistent=function(t,e,n,i){if(null==n&&(n=!0),null==i&&(i=function(){}),!this.components[t])return this.components[t]={loaded:!1,persistent:n,targets:document.getElementsByClassName("js-react--"+t),element:e,propsFunction:i},this.boot()},e.prototype.scrollOnNewVisit=function(){var e,n,i;if(t(window).off("scroll",this.onWindowScroll),e=this.newVisit,this.newVisit=!1,e&&!this.scrolled&&""!==(i=decodeURIComponent(document.location.hash.substr(1))))return null!=(n=document.getElementById(i))?n.scrollIntoView():void 0},e}()}).call(this,n("5wds"))},SpnN:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return l}));var i=n("0h6b"),s=n("Hs9Z"),r=n("EaLk"),o=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};const a=["user","user_others","beatmapset","beatmapset_others","others"],u=["forum_post","wiki_page"];class l{constructor(){this.debouncedSearch=Object(s.debounce)(this.search,500),this.query="",this.searching=!1,this.searchResult=null,this.selected=null,this.xhr=null}cycleSelectedItem(t){let e;if(this.selected)(e=Object.assign({},this.selected)).index+=t;else if(t>0)e={section:0,index:0};else{const t=a.length-1,n=a[t];e={section:t,index:this.sectionLength(n)-1}}if(e.index<0||e.index>=this.sectionLength(a[e.section])){let n=e.section;do{if((n=(n+t)%a.length)<0&&(n=a.length+n),n===e.section)return}while(0===this.sectionLength(a[n]));e={index:t>0?0:this.sectionLength(a[n])-1,section:n}}this.selected=e}get currentSection(){if(this.selected)return a[this.selected.section]}get selectedURL(){var t,e;const n=this.searchResult;if(this.selected&&n)switch(a[this.selected.section]){case"user":const s=null===(t=n.user.users[this.selected.index])||void 0===t?void 0:t.id;return s?Object(i.route)("users.show",{user:s}):void 0;case"user_others":return Object(i.route)("search",{mode:"user",query:this.query});case"beatmapset":const r=null===(e=n.beatmapset.beatmapsets[this.selected.index])||void 0===e?void 0:e.id;return r?Object(i.route)("beatmapsets.show",{beatmapset:r}):void 0;case"beatmapset_others":return Object(i.route)("search",{mode:"beatmapset",query:this.query});case"others":const o=u.filter(t=>n[t].total>0)[this.selected.index];return Object(i.route)("search",{mode:o,query:this.query})}}search(){const e=this.query.trim();0!==e.length?(this.searching=!0,this.xhr=t.get(Object(i.route)("quick-search"),{query:e}).done(Object(r.d)(t=>{this.searchResult=t,this.selected=null})).always(Object(r.d)(()=>{this.searching=!1}))):this.reset()}selectNone(){this.selected=null}setSelected(t,e){this.selected={section:a.indexOf(t),index:e}}updateQuery(t){this.query=t,this.selected=null,this.debouncedSearch()}reset(){this.debouncedSearch.cancel(),null!=this.xhr&&this.xhr.abort(),this.searching=!1,this.searchResult=null,this.selected=null}sectionLength(t){const e=this.searchResult;if(!e)return 0;switch(t){case"user":return e.user.users.length;case"user_others":return e.user.total>e.user.users.length?1:0;case"beatmapset":return e.beatmapset.beatmapsets.length;case"beatmapset_others":return 1;case"others":return u.filter(t=>e[t].total>0).length}return 0}}o([r.m],l.prototype,"query",void 0),o([r.m],l.prototype,"searching",void 0),o([r.m],l.prototype,"searchResult",void 0),o([r.m],l.prototype,"selected",void 0),o([r.d],l.prototype,"cycleSelectedItem",null),o([r.e],l.prototype,"currentSection",null),o([r.e],l.prototype,"selectedURL",null),o([r.d],l.prototype,"search",null),o([r.d],l.prototype,"selectNone",null),o([r.d],l.prototype,"setSelected",null),o([r.d],l.prototype,"updateQuery",null),o([r.d],l.prototype,"reset",null)}).call(this,n("5wds"))},SquP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var i=function(){function e(){}return e.fetchApprovalLink=function(e){return new Promise((function(n,i){return t.post(laroute.route("payments.paypal.create"),{order_id:e}).done(n).fail((function(t){return i({xhr:t})}))}))},e}()}).call(this,n("5wds"))},T0kv:function(t,e,n){"use strict";(function(t,e){var i,s=n("Qyfa"),r=n("RHtj"),o=n("lo2x"),a=n("jbZF"),u=n("mwlt"),l=n("2LKk"),c=n("w9NC"),h=n("zaxE"),d=n("oPHq"),p=n("FVE9"),f=n("eN1P"),m=(n("Hs9Z"),n("EaLk")),g=n("srn7"),v=n("3Te0"),y=n("NnvF"),w=n("+CAb"),b=(n("I7Md"),n("CwFt")),k=n("qHJG"),_=n("SpnN"),x=n("1P+u"),S=(n("0VTr"),n("Lv69")),E=n("XPyy"),C=n("tX9j"),j=n("VWAl"),T=n("ed4P"),P=n("Eama");null==window.reactTurbolinks&&(window.reactTurbolinks=new s.a),reactTurbolinks.register("countdownTimer",h.a,(function(t){return{deadline:t.dataset.deadline}})),reactTurbolinks.register("friendButton",p.a,(function(t){return{container:t,userId:parseInt(t.dataset.target)}})),reactTurbolinks.register("blockButton",a.a,(function(t){return{container:t,userId:parseInt(t.dataset.target)}})),reactTurbolinks.register("beatmap-discussion-events",r.a,(function(e){var n,i;return n={container:e,discussions:osu.parseJson("json-discussions"),events:osu.parseJson("json-events"),posts:osu.parseJson("json-posts")},i=osu.parseJson("json-users"),n.users=t.keyBy(i,"id"),n.users.null=n.users[void 0]=g.b.toJson(),n})),reactTurbolinks.register("beatmapset-panel",o.a,(function(t){return Object(m.m)(JSON.parse(t.dataset.beatmapsetPanel))})),reactTurbolinks.registerPersistent("forum-post-report",d.a),reactTurbolinks.register("spotlight-select-options",S.a,(function(){return osu.parseJson("json-spotlight-select-options")})),reactTurbolinks.registerPersistent("multiplayer-select-options",v.a,!0,(function(){return osu.parseJson("json-multiplayer-select-options")})),reactTurbolinks.register("comments",c.a,(function(t){var e;return(e=JSON.parse(t.dataset.props)).component=l.a,e})),reactTurbolinks.registerPersistent("chat-icon",u.a,!0,(function(t){var e;return null!=(e=function(){try{return JSON.parse(t.dataset.chatIcon)}catch(e){}}())?e:{}})),reactTurbolinks.registerPersistent("notification-icon",y.a,!0,(function(t){var e;return null!=(e=function(){try{return JSON.parse(t.dataset.notificationIcon)}catch(e){}}())?e:{}})),reactTurbolinks.registerPersistent("notification-widget",w.a,!0,(function(t){try{return JSON.parse(t.dataset.notificationWidget)}catch(e){}})),i=new _.a,reactTurbolinks.registerPersistent("quick-search",b.a,!0,(function(t){return{worker:i}})),reactTurbolinks.registerPersistent("quick-search-button",k.a,!0,(function(){return{worker:i}})),reactTurbolinks.registerPersistent("ranking-filter",x.a,!0,(function(t){return{countries:osu.parseJson("json-countries"),gameMode:t.dataset.gameMode,type:t.dataset.type,variants:function(){try{return JSON.parse(t.dataset.variants)}catch(e){}}()}})),reactTurbolinks.register("user-card",E.a,(function(t){return{modifiers:function(){try{return JSON.parse(t.dataset.modifiers)}catch(e){}}(),user:function(){if(t.dataset.isCurrentUser)return currentUser;try{return JSON.parse(t.dataset.user)}catch(e){}}()}})),reactTurbolinks.register("user-card-store",C.a,(function(t){return{user:JSON.parse(t.dataset.user)}})),reactTurbolinks.register("user-card-tooltip",j.a,(function(t){return{container:t,lookup:t.dataset.lookup}})),e(document).ready(j.b),reactTurbolinks.register("user-cards",T.a,(function(t){return{modifiers:function(){try{return JSON.parse(t.dataset.modifiers)}catch(e){}}(),users:function(){try{return JSON.parse(t.dataset.users)}catch(e){}}()}})),reactTurbolinks.register("wiki-search",P.a),reactTurbolinks.register("landing-news",f.a,(function(t){return{posts:osu.parseJson("json-posts")}}))}).call(this,n("Hs9Z"),n("5wds"))},TgbU:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEdit=function(){function i(){this.update=n(this.update,this),this.abortUpdate=n(this.abortUpdate,this),this.saving=n(this.saving,this),this.saved=n(this.saved,this),this.clearState=n(this.clearState,this),this.ajaxSaved=n(this.ajaxSaved,this),this.ajaxSaving=n(this.ajaxSaving,this),this.ajaxError=n(this.ajaxError,this),this.initializeUpdate=n(this.initializeUpdate,this),e(document).on("input change",".js-account-edit",this.initializeUpdate),e(document).on("ajax:error",".js-account-edit",this.ajaxError),e(document).on("ajax:send",".js-account-edit",this.ajaxSaving),e(document).on("ajax:success",".js-account-edit",this.ajaxSaved),e(document).on("ajax:success",".js-user-preferences-update",this.ajaxUserPreferencesUpdate)}return i.prototype.initializeUpdate=function(e){var n;if("1"===(n=e.currentTarget).dataset.accountEditAutoSubmit)return this.abortUpdate(n),this.saving(n),null==n.debouncedUpdate&&(n.debouncedUpdate=t.debounce(this.update,1e3)),n.debouncedUpdate(n)},i.prototype.ajaxError=function(t){return this.clearState(t.currentTarget)},i.prototype.ajaxSaving=function(t){return this.saving(t.currentTarget)},i.prototype.ajaxSaved=function(t){return this.saved(t.currentTarget)},i.prototype.ajaxUserPreferencesUpdate=function(t,n){return e.publish("user:update",n)},i.prototype.clearState=function(t){return t.dataset.accountEditState=""},i.prototype.getValue=function(t){var e,n,i,s,r,o,a,u,l,c;if("array"===t.dataset.accountEditType)for(a=null,c=[""],n=0,r=(u=t.querySelectorAll("input")).length;n<r;n++)(e=u[n]).checked&&c.push(e.value);else if("radio"===t.dataset.accountEditType){for(a=t.dataset.lastValue,s=0,o=(l=t.querySelectorAll('input[type="radio"]')).length;s<o;s++)if((e=l[s]).checked){c=e.value;break}}else a=t.dataset.lastValue,c="checkbox"===(i=t.querySelector(".js-account-edit__input")).type?i.checked:i.value;return{value:c,prevValue:a}},i.prototype.getMultiValue=function(t){var e,n,i,s,r;for(n={},i=0,s=(r=t.querySelectorAll(".js-account-edit__input")).length;i<s;i++)n[(e=r[i]).name]=e.checked;return n},i.prototype.saved=function(t){return t.dataset.accountEditState="saved",t.savedTimeout=Timeout.set(3e3,(e=this,function(){return e.clearState(t)}));var e},i.prototype.saving=function(t){return t.dataset.accountEditState="saving"},i.prototype.abortUpdate=function(t){var e;return Timeout.clear(t.savedTimeout),null!=(e=t.updating)&&e.abort(),this.clearState(t)},i.prototype.update=function(t){var n,i,s,r,o,a,u,l,c,h,d;if("multi"===t.dataset.accountEditType)n=this.getMultiValue(t);else{if((h=(a=this.getValue(t)).value)===(o=a.prevValue))return this.clearState(t);s=t.querySelector(".js-account-edit__input"),i=null!=(u=t.dataset.field)?u:s.name,t.dataset.lastValue=h,(r={})[""+i]=h,n=r}return c=null!=(l=t.dataset.url)?l:laroute.route("account.update"),t.updating=e.ajax(c,{method:"PUT",data:n}).done((d=this,function(n){return d.saved(t),e(t).trigger("ajax:success",n)})).fail(function(n){return function(i,s){if("abort"!==s)return t.lastValue=o,n.clearState(t),e(t).trigger("ajax:error",[i,s])}}(this))},i}()}).call(window)}).call(this,n("Hs9Z"))},U4GN:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.Nav2=function(){function i(t){this.clickMenu=t,this.showMenuBg=n(this.showMenuBg,this),this.loginBoxVisible=n(this.loginBoxVisible,this),this.autoMobileNav=n(this.autoMobileNav,this),this.autoCenterPopup=n(this.autoCenterPopup,this),this.menuBg=document.getElementsByClassName("js-nav2--menu-bg"),e.subscribe("click-menu:current",this.autoCenterPopup),e.subscribe("click-menu:current",this.autoMobileNav),e.subscribe("menu:current",this.showMenuBg)}return i.prototype.autoCenterPopup=function(t,n){var i,s,r,o,a,u,l,c,h,d,p;for(d=n.target,this.currentMenu=d,e(window).off("resize.nav2-center-popup"),o=0,a=(c=document.querySelectorAll(".js-nav2--centered-popup")).length;o<a;o++)null!=(i=(l=c[o]).closest(".js-click-menu"))&&(i.dataset.clickMenuId===this.currentMenu?(l.classList.remove("hidden"),s=l,u=document.querySelector(".js-click-menu[data-click-menu-target='"+this.currentMenu+"']")):l.classList.add("hidden"));if(null!=s)return p=this,r=function(){return p.centerPopup(s,u)},e(window).on("resize.nav2-center-popup",r),this.loginBoxVisible()&&osu.pageChangeImmediate(),r(),null!=(h=s.querySelector(".js-nav2--autofocus"))?h.focus():void 0},i.prototype.autoMobileNav=function(t,n){var i,s,r,o;return i=n.previousTree,s=n.target,r=n.tree,"mobile-menu"===s&&(this.clickMenu.show("mobile-nav"),Timeout.set(0,(o=this,function(){return e(o.clickMenu.menu("mobile-menu")).finish().slideDown(150)}))),-1!==r.indexOf("mobile-menu")?Blackout.show():-1!==i.indexOf("mobile-menu")?(Blackout.hide(),Timeout.set(0,function(t){return function(){return e(t.clickMenu.menu("mobile-menu")).finish().slideUp(150)}}(this))):void 0},i.prototype.centerPopup=function(t,e){var n,i,s,r,o,a,u,l,c,h,d,p;return l=t.getBoundingClientRect(),s=t.parentElement.getBoundingClientRect(),p=e.getBoundingClientRect(),n=document.body.getBoundingClientRect().width-5,d=p.width/2,r=l.width/2,i=(u=(o=s.left)+(a=p.left+d-o-r))<0?-1*p.left:(h=u+l.width,(c=Math.round(h-n))>0?a-c:a),i=Math.floor(i),t.style.transform="translateX("+i+"px)"},i.prototype.loginBoxVisible=function(){return"nav2-login-box"===this.currentMenu},i.prototype.showMenuBg=function(e,n){var i;return i=t.startsWith(n,"nav2-menu-popup-"),Fade.toggle(this.menuBg[0],i)},i}()}).call(window)}).call(this,n("Hs9Z"))},UaOV:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.NavButton=function(){function e(){this.hideOrShow=t(this.hideOrShow,this),this.load=t(this.load,this),this.containers=document.getElementsByClassName("js-nav-button--container"),this.items=document.getElementsByClassName("js-nav-button--item"),this.main=document.getElementsByClassName("js-nav-button"),addEventListener("turbolinks:load",this.load)}return e.prototype.load=function(){var t,e,n,s;if(this.listening||(this.listening=!0,i(window).on("resize",this.hideOrShow)),0!==this.main.length){for(this.itemWidth=this.items[0].offsetWidth,this.defaultWidth=0,e=0,n=(s=this.containers).length;e<n;e++)t=s[e],this.defaultWidth+=t.offsetWidth;return this.hideOrShow()}},e.prototype.hideOrShow=function(){var t,e,n,i,s,r,o,a,u;if(0!==this.main.length){for(t=this.main[0].offsetWidth,e=this.defaultWidth,i=0,r=(a=this.items).length;i<r;i++)a[i].classList.remove("hidden");if(t<e)for(s=0,o=(u=this.items).length;s<o;s++)if(n=u[s],e-=this.itemWidth,n.classList.add("hidden"),t>=e)return}},e}()}).call(window)},VAqo:function(t,e,n){(function(t){n("5wds"),n("5wds");(function(){var e,n,i={}.hasOwnProperty;e=function(t){switch(t){case"false":return!1;case"true":return!0}},n=function(e){var n;return n=parseInt(e,10),t.isFinite(n)?n:null},this.BeatmapsetFilter=function(){function s(){}return s.castFromString={genre:n,language:n,mode:n,nsfw:e},s.charToKey={c:"general",e:"extra",g:"genre",l:"language",m:"mode",nsfw:"nsfw",played:"played",q:"query",r:"rank",s:"status",sort:"sort"},s.filtersFromUrl=function(t){var e,n,s,r,o,a;for(e in r=new URL(t).searchParams,n={},o=this.charToKey)i.call(o,e)&&(s=o[e],null!=(a=r.get(e))&&0!==a.length&&(this.castFromString[s]&&(a=this.castFromString[s](a)),n[s]=a));return n},s.keyToChar=function(){return null!=this._keyToChar?this._keyToChar:this._keyToChar=t.invert(this.charToKey)},s.defaults={general:"",extra:"",genre:null,language:null,mode:null,played:"any",query:"",rank:"",status:"leaderboard"},s.expand=["genre","language","extra","rank","played"],s.fillDefaults=function(t){var e,n,i,r,o,a;for(a={},e=0,i=(r=s.keys).length;e<i;e++)a[n=r[e]]=null!=(o=t[n])?o:s.getDefault(t,n);return a},s.getDefault=function(t,e){var n,i,r,o;if(s.defaults.hasOwnProperty(e))return s.defaults[e];switch(e){case"nsfw":return null!=(n="undefined"!=typeof currentUser&&null!==currentUser&&null!=(i=currentUser.user_preferences)?i.beatmapset_show_nsfw:void 0)&&n;case"sort":return(null!=(r=t.query)?r.trim().length:void 0)>0?"relevance_desc":"pending"===(o=t.status)||"graveyard"===o||"mine"===o?"updated_desc":"ranked_desc"}},s.getDefaults=function(t){var e,n,i,r,o;for(o={},e=0,i=(r=s.keys).length;e<i;e++)o[n=r[e]]=s.getDefault(t,n);return o},s.keys=["general","extra","genre","language","mode","nsfw","played","query","rank","sort","status"],s.queryParamsFromFilters=function(t){var e,n,s;for(n in e={},t)i.call(t,n)&&null!=(s=t[n])&&this.getDefault(t,n)!==s&&(e[this.keyToChar()[n]]=s);return e},s.supporterRequired=function(e){return t.reject(["played","rank"],(n=this,function(i){return t.isEmpty(e[i])||e[i]===n.getDefault(e,i)}));var n},s}()}).call(window)}).call(this,n("Hs9Z"))},VWAl:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return k})),n.d(e,"a",(function(){return _}));var i=n("0h6b"),s=n("Hs9Z"),r=n("/G9H"),o=n("WKXC"),a=n("ZG74"),u=n("LhsB"),l=n("XPyy");const c="qtip--user-card";let h,d=!1;function p(e){const n=e.dataset.userId;e._tooltip=n;const i=t("#js-usercard__loading-template").children().clone()[0];i.classList.remove("js-react--user-card"),i.classList.add("js-react--user-card-tooltip"),i.dataset.lookup=n,t(e).qtip(function(e){return{content:{text:e},events:{render:reactTurbolinks.boot,show:b},hide:{delay:220,effect:w,fixed:!0},position:{adjust:{scroll:!1},at:"right center",my:"left center",viewport:t(window)},show:{delay:200,effect:y,ready:!0},style:{classes:c,def:!1,tip:!1}}}(i))}function f(){d=!1,h=null}function m(){d=!0}function g(){d=!1}function v(e){if(null!=h)return;if(osu.isMobile())return;const n=e.currentTarget,i=osu.presence(n.dataset.userId);if(null!=i&&!s.find(currentUser.blocks,{target_id:parseInt(i,10)})){if(null==n._tooltip)return p(n);if(n._tooltip!==n.dataset.userId){const e=t(n).qtip("api");null!=e&&(null!=e.tooltip&&Object(o.unmountComponentAtNode)(e.tooltip.find(".js-react--user-card-tooltip")[0]),e.destroy(),delete n._tooltip)}}}function y(){t(this).fadeTo(110,1)}function w(){t(this).fadeTo(110,0)}function b(e,n){if(null!=h||osu.isMobile())return e.preventDefault();const i=n.target[0];i._tooltip!==i.dataset.userId&&(e.preventDefault(),t(i).trigger("mouseover"))}function k(){t(document).on("mouseover",".js-usercard",v),t(document).on("mouseenter",".js-react--user-card-tooltip",m),t(document).on("mouseleave",".js-react--user-card-tooltip",g),t(document).on("turbolinks:before-cache",f)}class _ extends r.PureComponent{constructor(){super(...arguments),this.state={},this.contextActiveKeyDidChange=a.c.bind(this),this.activeKeyDidChange=e=>{h=e,this.contextActiveKeyDidChange(e),null!=e||d||t(`.${c}`).qtip("hide")}}componentDidMount(){this.getUser().then(t=>{this.setState({user:t})})}getUser(){const e=Object(i.route)("users.card",{user:this.props.lookup});return t.ajax({dataType:"json",type:"GET",url:e})}render(){const t=this.state.activeKey===this.props.lookup;return r.createElement(u.a.Provider,{value:this.props.container},r.createElement(a.a.Provider,{value:{activeKeyDidChange:this.activeKeyDidChange}},r.createElement(a.b.Provider,{value:this.props.lookup},r.createElement(l.a,{activated:t,user:this.state.user}))))}}}).call(this,n("5wds"))},WHzX:function(t,e,n){n("5wds"),n("5wds");(function(){this.Timeout=function(){function t(){}return t.clear=function(t){return clearTimeout(t)},t.set=function(t,e){return setTimeout(e,t)},t}()}).call(window)},WK7C:function(t,e,n){(function(t,e){n("5wds"),n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.LandingUserStats=function(){function i(){var e;this.resize=n(this.resize,this),this.loadData=n(this.loadData,this),this.margin={top:40,right:0,bottom:0,left:0},this.peakR=5,this.svgContainerOuter=t.select(".js-landing-graph"),this.svgContainerOuter.selectAll("svg").remove(),this.svgContainerInner=this.svgContainerOuter.append("svg").attr("class","landing-graph"),this.svg=this.svgContainerInner.append("g").attr("transform","translate("+this.margin.left+", "+(this.margin.top+1)+")"),this.svgArea=this.svg.append("path").attr("class","landing-graph__area"),this.svgPeakText=this.svg.append("text").attr("class","landing-graph__text").attr("y",2*-this.peakR),this.svgPeakCircle=this.svg.append("circle").attr("class","landing-graph__circle").attr("cy",0).attr("r",this.peakR),this.scaleX=t.scaleLinear(),this.scaleY=t.scaleTime(),this.area=t.area().curve(t.curveBasis).x((e=this,function(t){return e.scaleX(t.x)})).y0(function(t){return function(){return t.height}}(this)).y1(function(t){return function(e){return t.scaleY(e.y)}}(this)),this.loadData(),this.resize()}return i.prototype.loadData=function(){if(this.data=osu.parseJson("json-stats"),!e.isEmpty(this.data))return this.maxElem=e.maxBy(this.data,(function(t){return t.y})),this.scaleX.domain(t.extent(this.data,(function(t){return t.x}))),this.scaleY.domain([0,t.max(this.data,(function(t){return t.y}))]),this.svgPeakText.text(osu.trans("home.landing.peak",{count:osu.formatNumber(this.maxElem.y)})),this.peakTextLength=this.svgPeakText.node().getComputedTextLength()},i.prototype.resize=function(){var t;if(!e.isEmpty(this.data))return this.width=parseInt(this.svgContainerOuter.style("width"))-this.margin.left-this.margin.right,this.height=parseInt(this.svgContainerOuter.style("height"))-this.margin.top-this.margin.bottom,this.scaleX.range([0,this.width]),this.scaleY.range([this.height,0]),this.svgContainerInner.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.svgArea.datum(this.data).attr("d",this.area),this.svgPeakCircle.attr("cx",this.scaleX(this.maxElem.x)),this.svgPeakText.attr("x",(t=this,function(){var e;return e=t.scaleX(t.maxElem.x)+2*t.peakR,t.peakTextLength+e>t.width?t.scaleX(t.maxElem.x)-(t.peakTextLength+2*t.peakR):e}))},i}()}).call(window)}).call(this,n("q3Jf"),n("Hs9Z"))},Y4VH:function(t,e,n){n("5wds"),n("5wds");(function(){this.Hits=function(){function t(){}return t.generate=function(t){var e,n;return n=t.score,{header:(e="mania"===t.playmode?["count_geki","count_300","count_katu","count_100","count_50"]:["count_300","count_100","count_50"]).map((function(t){return osu.trans("common.score_count."+t)})).join("/"),values:e.map((function(t){return osu.formatNumber(n.statistics[t])})).join("/")}},t}()}).call(window)},YEnZ:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BeatmapPack=function(){function e(e){var n;this.slideDown=t(this.slideDown,this),this.close=t(this.close,this),this.open=t(this.open,this),this.onClick=t(this.onClick,this),this.el=e,this.packId=e.dataset.packId,this.packBody=this.el.querySelector(".js-accordion__item-body"),this.expander=this.el.querySelector(".js-accordion__item-header"),this.busy=!1,this.isCurrent=this.el.classList.contains("js-accordion__item--expanded"),i(".js-accordion").on("beatmappack:clicked",this.onClick),i(this.expander).on("click",(n=this,function(t){return t.preventDefault(),i(n.el).trigger("beatmappack:clicked",n.packId)}))}return e.initialize=function(){var t,n,i,s,r;for(r=[],n=0,i=(s=document.querySelectorAll(".js-beatmap-pack")).length;n<i;n++)t=s[n],r.push(new e(t));return r},e.prototype.onClick=function(t,e){return t.stopPropagation(),this.isCurrent||this.packId!==e?this.close():this.open()},e.prototype.open=function(){var t,e;if(this.isCurrent=!0,!this.busy)return this.nextFrame((e=this,function(){return i(e.el).addClass("js-accordion__item--expanded")})),null!=(t=this.packBody.innerHTML)&&t.length?this.isCurrent?this.slideDown():void 0:(this.busy=!0,this.getBeatmapPackItem(this.packId).done(function(t){return function(e){return t.nextFrame((function(){if(t.packBody.innerHTML=e,t.isCurrent)return t.slideDown()}))}}(this)).fail(osu.ajaxError).always(function(t){return function(){return t.busy=!1}}(this)))},e.prototype.close=function(){var t;if(this.isCurrent)return this.isCurrent=!1,this.nextFrame((t=this,function(){return t.packBody.style.height="0",i(t.el).removeClass("js-accordion__item--expanded")}))},e.prototype.getBeatmapPackItem=function(t){return i.get(laroute.route("packs.raw",{pack:t}))},e.prototype.slideDown=function(){var t,e;return this.packBody.style.height="",t=this.packBody.getBoundingClientRect(),this.packBody.style.height="0",this.nextFrame((e=this,function(){return e.packBody.style.height=t.height+"px"}))},e.prototype.nextFrame=function(t){return window.requestAnimationFrame(t)},e}()}).call(window)},auMk:function(t,e,n){n("5wds"),n("5wds");(function(){this.Polyfills=function(){function t(){this.customEvent(),this.localStorage(),this.mathTrunc(),this.composedPath()}return t.prototype.composedPath=function(){if("function"!=typeof Event.prototype.composedPath)return Event.prototype.composedPath=function(){var t,e;for(e=this.target,t=[];null!=e.parentNode;)t.push(e),e=e.parentNode;return t.push(document,window),t}},t.prototype.customEvent=function(){var t;if("function"!=typeof CustomEvent)return(t=function(t,e){var n;return null==e&&(e={bubbles:!1,cancelable:!1,detail:void 0}),(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}).prototype=window.Event.prototype,window.CustomEvent=t},t.prototype.localStorage=function(){var t;try{return window.localStorage.setItem("_test","1"),window.localStorage.removeItem("_test")}catch(e){return t=new DumbStorage,window.localStorage=t,window.localStorage.__proto__=t}},t.prototype.mathTrunc=function(){return null!=Math.trunc?Math.trunc:Math.trunc=function(t){return t-t%1}},t}()}).call(window)},bTZw:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BbcodePreview=function(){function e(){this.hidePreview=t(this.hidePreview,this),this.showPreview=t(this.showPreview,this),this.fetchPreview=t(this.fetchPreview,this),i(document).on("click",".js-bbcode-preview--show",this.fetchPreview),i(document).on("click",".js-bbcode-preview--hide",this.hidePreview)}return e.prototype.fetchPreview=function(t){var e,n,s,r,o;if(r=t.target,n=i(r).parents(".js-bbcode-preview--form"),s=n.find(".js-bbcode-preview--preview"),e=n.find(".js-bbcode-preview--body"),o=e.val(),e.attr("data-last-text"),"preview"!==n.attr("data-state")&&osu.present(o)){var a;if(o!==e.attr("data-last-text"))return n.attr("data-state","loading-preview"),i.ajax({url:laroute.route("bbcode-preview"),method:"POST",data:{text:o}}).done((a=this,function(n){return e.attr("data-last-text",o),s.html(n),osu.pageChange(),a.showPreview(t)})).fail(osu.emitAjaxError(r));this.showPreview(t)}},e.prototype.showPreview=function(t){return i(t.target).parents(".js-bbcode-preview--form").attr("data-state","preview"),osu.pageChange()},e.prototype.hidePreview=function(t){var e;return(e=i(t.target).parents(".js-bbcode-preview--form")).attr("data-state","write"),osu.pageChange(),e.find(".js-bbcode-preview--body").focus()},e}()}).call(window)},byFe:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumAutoClick=function(){function i(){this.previousClick=n(this.previousClick,this),this.onScroll=n(this.onScroll,this),this.onLoad=n(this.onLoad,this),this.nextClick=n(this.nextClick,this),this._triggerDistance=1200,this.throttledOnScroll=t.throttle(this.onScroll,1e3),e(document).on("turbolinks:load",this.onLoad)}return i.prototype.commonClick=function(t){if("1"!==t.dataset.noMore&&"1"!==t.dataset.failed&&0!==t.getBoundingClientRect().height)return t.click()},i.prototype.nextClick=function(){if(null!=this.nextLink&&!(this.nextLink.getBoundingClientRect().top>document.documentElement.clientHeight+this._triggerDistance))return this.commonClick(this.nextLink)},i.prototype.onLoad=function(){if(e.unsubscribe("scroll",this.throttledOnScroll),e(window).off("osu:page:change",this.throttledOnScroll),this.nextLink=document.querySelector(".js-forum__posts-show-more--next"),this.previousLink=document.querySelector(".js-forum__posts-show-more--previous"),null!=this.nextLink&&null!=this.previousLink)return this.throttledOnScroll(),e(window).on("scroll",this.throttledOnScroll),e.subscribe("osu:page:change",this.throttledOnScroll)},i.prototype.onScroll=function(){return this.previousClick(),this.nextClick()},i.prototype.previousClick=function(){if(null!=this.previousLink&&!(this.previousLink.getBoundingClientRect().top<-this._triggerDistance))return this.commonClick(this.previousLink)},i}()}).call(window)}).call(this,n("Hs9Z"))},eN1P:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("0h6b"),s=n("Hs9Z"),r=n("XFVs"),o=n("/G9H"),a=n("Ncbg");function u({posts:t}){return o.createElement("div",{className:"landing-news"},t.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"landing-news__posts"},o.createElement(r.a,{modifiers:["landing","hover"],post:t[0]})),o.createElement("div",{className:"landing-news__posts"},s.slice(t,1).map((t,e)=>o.createElement(r.a,{key:e,modifiers:["landing","hover"],post:t}))),o.createElement("div",{className:"landing-news__link"},o.createElement(a.a,{hasMore:!0,label:osu.trans("home.landing.see_more_news"),loading:!1,modifiers:["no-icon"],url:Object(i.route)("news.index")}))))}},exjS:function(t,e,n){n("5wds"),n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.DumbStorage=function(){function e(){this.setItem=t(this.setItem,this),this.removeItem=t(this.removeItem,this),this.getItem=t(this.getItem,this),this.clear=t(this.clear,this),this._data={}}return e.prototype.clear=function(){return this._data={}},e.prototype.getItem=function(t){return this._data.hasOwnProperty(t)?this._data[t]:null},e.prototype.removeItem=function(t){return delete this._data[t]},e.prototype.setItem=function(t,e){return this._data[t]=String(e)},e}()}).call(window)},gfK4:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.SyncHeight=function(){function i(){this.sync=n(this.sync,this),this.onResize=n(this.onResize,this),this.observe=n(this.observe,this),this.targets=document.getElementsByClassName("js-sync-height--target"),this.references=document.getElementsByClassName("js-sync-height--reference"),this.throttledSync=t.throttle(this.sync,100),e(document).on("turbolinks:load",this.sync),e.subscribe("osu:page:change",this.throttledSync),e(window).on("resize",this.sync),this.observe()}return i.prototype.observe=function(){var t;return t={attributes:!0,subtree:!0},this.observer=new MutationObserver(this.onResize),this.observer.observe(document,t)},i.prototype.onResize=function(t){var e,n;for(e=0,n=t.length;e<n;e++)if("TEXTAREA"===t[e].target.tagName)return this.sync()},i.prototype.sync=function(){var t,e,n,i,s,r,o,a,u,l,c;for(e={},n=0,s=(o=this.references).length;n<s;n++)e[(u=o[n]).getAttribute("data-sync-height-target")]=u.offsetHeight;for(l=[],i=0,r=(a=this.targets).length;i<r;i++)null!=(t=e[(c=a[i]).getAttribute("data-sync-height-id")])?l.push(c.style.minHeight=t+"px"):l.push(void 0);return l},i}()}).call(window)}).call(this,n("Hs9Z"))},hTA1:function(t,e,n){(function(t,e){var i=n("5wds"),s=n("5wds");(function(){null==this.polyfills&&(this.polyfills=new Polyfills),t.start(),t.setProgressBarDelay(0),Lang.setLocale(this.currentLocale),e.relativeTimeThreshold("ss",44),e.relativeTimeThreshold("s",120),e.relativeTimeThreshold("m",120),e.relativeTimeThreshold("h",48),e.relativeTimeThreshold("d",62),e.relativeTimeThreshold("M",24),i.timeago.inWords=function(t){return e.duration(-1*t).humanize(!0)},s(document).on("turbolinks:request-start",LoadingOverlay.show),s(document).on("turbolinks:request-end",LoadingOverlay.hide),s(document).on("submit","form",(function(t){if("0"!==t.currentTarget.dataset.loadingOverlay)return LoadingOverlay.show()})),s(document).on("turbolinks:load",(function(){return BeatmapPack.initialize(),StoreSupporterTag.initialize(),StoreCheckout.initialize()})),null==this.currentUserObserver&&(this.currentUserObserver=new CurrentUserObserver),null==this.syncHeight&&(this.syncHeight=new SyncHeight),null==this.stickyHeader&&(this.stickyHeader=new StickyHeader),null==this.accountEdit&&(this.accountEdit=new AccountEdit),null==this.accountEditAvatar&&(this.accountEditAvatar=new AccountEditAvatar),null==this.accountEditBlocklist&&(this.accountEditBlocklist=new AccountEditBlocklist),null==this.bbcodePreview&&(this.bbcodePreview=new BbcodePreview),null==this.beatmapsetDownloadObserver&&(this.beatmapsetDownloadObserver=new BeatmapsetDownloadObserver),null==this.changelogChartLoader&&(this.changelogChartLoader=new ChangelogChartLoader),null==this.checkboxValidation&&(this.checkboxValidation=new CheckboxValidation),null==this.fancyGraph&&(this.fancyGraph=new FancyGraph),null==this.formClear&&(this.formClear=new FormClear),null==this.formError&&(this.formError=new FormError),null==this.formPlaceholderHide&&(this.formPlaceholderHide=new FormPlaceholderHide),null==this.formToggle&&(this.formToggle=new FormToggle),null==this.forum&&(this.forum=new Forum),null==this.forumAutoClick&&(this.forumAutoClick=new ForumAutoClick),null==this.forumCover&&(this.forumCover=new ForumCover),null==this.forumTopicTitle&&(this.forumTopicTitle=new ForumTopicTitle),null==this.forumTopicWatchAjax&&(this.forumTopicWatchAjax=new ForumTopicWatchAjax),null==this.globalDrag&&(this.globalDrag=new GlobalDrag),null==this.landingGraph&&(this.landingGraph=new LandingGraph),null==this.menu&&(this.menu=new Menu),null==this.navButton&&(this.navButton=new NavButton),null==this.postPreview&&(this.postPreview=new PostPreview),null==this.scale&&(this.scale=new Scale),null==this.search&&(this.search=new Search),null==this.stickyFooter&&(this.stickyFooter=new StickyFooter),null==this.timeago&&(this.timeago=new Timeago),null==this.tooltipBeatmap&&(this.tooltipBeatmap=new TooltipBeatmap),null==this.tooltipDefault&&(this.tooltipDefault=new TooltipDefault),null==this.formConfirmation&&(this.formConfirmation=new FormConfirmation(this.formError)),null==this.forumPostsSeek&&(this.forumPostsSeek=new ForumPostsSeek(this.forum)),null==this.forumTopicPostJump&&(this.forumTopicPostJump=new ForumTopicPostJump(this.forum)),null==this.forumTopicReply&&(this.forumTopicReply=new ForumTopicReply({bbcodePreview:this.bbcodePreview,forum:this.forum,stickyFooter:this.stickyFooter})),null==this.nav2&&(this.nav2=new Nav2(osuCore.clickMenu)),null==this.twitchPlayer&&(this.twitchPlayer=new TwitchPlayer(osuCore.turbolinksReload)),s(document).on("change",".js-url-selector",(function(t){return osu.navigate(t.target.value,"1"===t.target.dataset.keepScroll)})),s(document).on("keydown",(function(t){if(27===t.keyCode)return s.publish("key:esc")}))}).call(window)}).call(this,n("dMdw"),n("7EfK"))},icRW:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Menu=function(){function e(){this.setMenu=t(this.setMenu,this),this.refresh=t(this.refresh,this),this.hideMenu=t(this.hideMenu,this),this.onMouseLeave=t(this.onMouseLeave,this),this.onMouseEnter=t(this.onMouseEnter,this),this.onTouchStart=t(this.onTouchStart,this),this.onGlobalTouchstart=t(this.onGlobalTouchstart,this),this.onDocumentReady=t(this.onDocumentReady,this),this.currentTree=t(this.currentTree,this),this.defaultMenu=t(this.defaultMenu,this),this.menuTimeout=150,i(document).on("touchstart",".js-menu",this.onTouchStart),i(document).on("mouseenter",".js-menu",this.onMouseEnter),i(document).on("mouseleave",".js-menu",this.onMouseLeave),i(document).on("touchstart",this.onGlobalTouchstart),i(document).on("turbolinks:load",this.onDocumentReady)}return e.prototype.$menuLink=function(t){return i(".js-menu[data-menu-target"+(t?"='"+t+"'":"")+"]")},e.prototype.closestMenuId=function(t){return t.closest("[data-menu-id]").attr("data-menu-id")},e.prototype.defaultMenu=function(){var t,e;return null!=(t=document.querySelector('.js-menu[data-menu-default="1"]'))&&null!=(e=t.dataset)?e.menuTarget:void 0},e.prototype.parentsMenuId=function(t){return t.parents("[data-menu-id]").attr("data-menu-id")},e.prototype.currentTree=function(){var t,e;if(!this.currentMenu)return[];for(t=[e=this.currentMenu];e=this.closestMenuId(this.$menuLink(e));)t.push(e);return t},e.prototype.onDocumentReady=function(){return this.refresh(),this.setMenu(null,(t=this,function(){return t.closestMenuId(i(":hover").last())}));var t},e.prototype.onGlobalTouchstart=function(t){if(this.currentMenu&&null==t.target.closest(".js-menu"))return this.hideMenu()},e.prototype.onTouchStart=function(t){var e,n,s,r,o,a;if(n=t.currentTarget,null!=(r=n.dataset.menuTarget))return e=i(r),t.preventDefault(),o=parseInt(null!=(s=n.dataset.menuShowDelay)?s:this.menuTimeout,10),this.setMenu(o,(a=this,function(){return a.currentMenu===r?a.closestMenuId(e):r}))},e.prototype.onMouseEnter=function(t){var e,n,s,r;return e=t.currentTarget,s=parseInt(null!=(n=e.dataset.menuShowDelay)?n:this.menuTimeout,10),this.setMenu(s,(r=this,function(){var t;return null!=(t=e.dataset.menuTarget)?t:r.closestMenuId(i(e))}))},e.prototype.onMouseLeave=function(t){var e,n;return e=i(t.currentTarget),this.setMenu(null,(n=this,function(){return n.parentsMenuId(e)}))},e.prototype.hideMenu=function(){return this.setMenu()},e.prototype.refresh=function(){var t,e,n,s,r,o,a;for(null==this.currentMenu&&(this.currentMenu=this.defaultMenu()),o=document.querySelectorAll(".js-menu[data-menu-id]"),t=this.currentTree(),i.publish("menu:current",this.currentMenu),a=[],e=0,n=o.length;e<n;e++)r=(s=o[e]).getAttribute("data-menu-id"),-1===t.indexOf(r)?(Fade.out(s),a.push(this.$menuLink(r).removeClass("js-menu--active"))):(Fade.in(s),this.$menuLink(r).addClass("js-menu--active"),a.push(i(s).trigger("menu:showing")));return a},e.prototype.setMenu=function(t,e){return null==t&&(t=this.menuTimeout),Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(t,(n=this,function(){return n.currentMenu="function"==typeof e?e():void 0,n.refresh()}));var n},e}()}).call(window)},jepR:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumCover=function(){function e(){var e;this.refresh=t(this.refresh,this),this.remove=t(this.remove,this),this.updateOptions=t(this.updateOptions,this),this.update=t(this.update,this),this.setOverlay=t(this.setOverlay,this),this.initFileupload=t(this.initFileupload,this),this.isModalOpen=t(this.isModalOpen,this),this.hasCoverEditor=t(this.hasCoverEditor,this),this.hasCover=t(this.hasCover,this),this.checkModal=t(this.checkModal,this),this.$uploadButton=t(this.$uploadButton,this),this.header=document.getElementsByClassName("js-forum-cover--header"),this.uploadButton=document.getElementsByClassName("js-forum-cover--upload-button"),this.removeButton=document.getElementsByClassName("js-forum-cover--remove-button"),this.overlay=document.getElementsByClassName("js-forum-cover--overlay"),this.loading=document.getElementsByClassName("js-forum-cover--loading"),this.modal=document.getElementsByClassName("js-forum-cover--modal"),i.subscribe("click-menu:current",this.checkModal),i(document).on("click",".js-forum-cover--remove-button",this.remove),i.subscribe("dragenterGlobal",(e=this,function(){return e.setOverlay("active")})),i.subscribe("dragendGlobal",function(t){return function(){return t.setOverlay("hidden")}}(this)),i(document).on("dragenter",".js-forum-cover--overlay",function(t){return function(){return t.setOverlay("hover")}}(this)),i(document).on("dragleave",".js-forum-cover--overlay",function(t){return function(){return t.setOverlay("active")}}(this)),i(document).on("turbolinks:load",this.refresh)}return e.prototype.$uploadButton=function(){return i(this.uploadButton[0])},e.prototype.checkModal=function(t,e){if("forum-cover-edit"===e.target)return this.initFileupload()},e.prototype.hasCover=function(){return"post"!==this.uploadButton[0].dataset.customMethod},e.prototype.hasCoverEditor=function(){return this.uploadButton.length>0},e.prototype.isModalOpen=function(t){var e;return!!this.hasCoverEditor()&&"hidden"!==(null!=(e=this.modal[0])?e.dataset.visibility:void 0)},e.prototype.initFileupload=function(){var t,e;if(this.isModalOpen()&&!this.uploadButton[0]._initialized)return this.uploadButton[0]._initialized=!0,t=i(".js-forum-cover--modal"),this.$uploadButton().fileupload({method:"POST",paramName:"cover_file",dataType:"json",dropZone:t,submit:(e=this,function(){return e.uploadButton[0].dataset.state="loading"}),done:function(t){return function(e,n){return t.update(n.result)}}(this),fail:_exported.fileuploadFailCallback,complete:function(t){return function(e,n){return t.uploadButton[0].dataset.state=""}}(this)}),this.updateOptions()},e.prototype.setOverlay=function(t){if(this.hasCoverEditor()&&t!==this.overlay[0].getAttribute("data-state"))return this.overlay[0].setAttribute("data-state",t)},e.prototype.update=function(t){return i(".js-forum-cover--input").val(t.id),this.uploadButton[0].dataset.url=t.url,this.uploadButton[0].dataset.customMethod=t.method,this.uploadButton[0].dataset.fileUrl=t.fileUrl||"",this.updateOptions(),this.refresh()},e.prototype.updateOptions=function(){if(this.uploadButton[0]._initialized)return this.$uploadButton().fileupload("option",{url:this.uploadButton[0].dataset.url,formData:{_method:this.uploadButton[0].dataset.customMethod}})},e.prototype.remove=function(t){var e;if((t.preventDefault(),this.hasCover())&&confirm(t.currentTarget.dataset.destroyConfirm))return this.removeButton[0].dataset.state="loading",i.ajax({url:this.uploadButton[0].dataset.url,method:"delete"}).done((e=this,function(t){return e.update(t)})).always(function(t){return function(){return t.removeButton[0].dataset.state=""}}(this))},e.prototype.refresh=function(){var t,e;if(this.hasCoverEditor())return t=this.uploadButton[0].dataset.fileUrl||this.uploadButton[0].dataset.defaultFileUrl,i(this.header).css({backgroundImage:null!=(e=osu.urlPresence(t))?e:""}),this.removeButton[0].disabled=!this.hasCover(),this.initFileupload()},e}()}).call(window)},lPUA:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.StickyHeader=function(){function i(){this.stickOrUnstick=n(this.stickOrUnstick,this),this.shouldStick=n(this.shouldStick,this),this.shouldPin=n(this.shouldPin,this),this.setVisible=n(this.setVisible,this),this.pin=n(this.pin,this),this.onScroll=n(this.onScroll,this),this.debouncedOnScroll=t.debounce(this.onScroll,20),this.header=document.getElementsByClassName("js-pinned-header"),this.marker=document.getElementsByClassName("js-sticky-header"),this.pinnedSticky=document.getElementsByClassName("js-pinned-header-sticky"),this.stickyBreadcrumbs=document.getElementsByClassName("js-sticky-header-breadcrumbs"),this.stickyContent=document.getElementsByClassName("js-sticky-header-content"),e(window).on("scroll",this.onScroll),e(document).on("turbolinks:load",this.debouncedOnScroll),e.subscribe("osu:page:change",this.debouncedOnScroll),e(window).on("resize",this.stickOrUnstick)}return i.prototype.breadcrumbsElement=function(){return this.stickyBreadcrumbs[0]},i.prototype.contentElement=function(){return this.stickyContent[0]},i.prototype.headerHeight=function(){var t;return t=window._styles.header,osu.isMobile()?t.heightMobile:t.heightSticky},i.prototype.onScroll=function(){return this.pin(),this.stickOrUnstick()},i.prototype.pin=function(){if(null!=this.header[0])return this.shouldPin()?document.body.classList.add("js-header-is-pinned"):document.body.classList.remove("js-header-is-pinned")},i.prototype.scrollOffset=function(t){var e;return e=null!=this.pinnedSticky[0]?this.pinnedSticky[0].getBoundingClientRect().height:0,Math.max(0,t-this.headerHeight()-e)},i.prototype.setVisible=function(t){return Fade.toggle(this.pinnedSticky[0],t),e(document).trigger("sticky-header:sticking",[t])},i.prototype.shouldPin=function(t){return null==t&&(t=window.pageYOffset),t>30||this.shouldStick()},i.prototype.shouldStick=function(){if(this.marker.length>0&&null!=this.pinnedSticky[0])return this.marker[0].getBoundingClientRect().top<this.headerHeight()+this.pinnedSticky[0].getBoundingClientRect().height},i.prototype.stickOrUnstick=function(){var t;if(null!=(t=this.shouldStick()))return this.setVisible(t)},i}()}).call(window)}).call(this,n("Hs9Z"))},mnuU:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var i=n("/G9H");class s extends i.PureComponent{constructor(t){super(t),this.eventId=`gallery-contest-${osu.uuid()}`,this.mainRef=i.createRef(),this.buttonState=()=>{const t=this.button();return null!=t&&null!=t.dataset.contestVoteMeta?JSON.parse(t.dataset.contestVoteMeta):{}},this.buttonTitle=()=>{if(!this.state.isLoading&&!this.state.button.votingOver)return this.state.button.isSelected?osu.trans("contest.voting.button.remove"):this.state.button.hasVote?osu.trans("contest.voting.button.add"):osu.trans("contest.voting.button.used_up")},this.isDisabled=()=>this.state.isLoading||this.state.button.votingOver||!this.state.button.isSelected&&!this.state.button.hasVote,this.loadingEnd=()=>{this.setState({isLoading:!1}),this.syncState()},this.loadingStart=()=>{this.setState({isLoading:!0})},this.mainClass=()=>{let t="pswp__button pswp__button--contest-vote js-gallery-extra";return this.state.button.isSelected&&(t+=" pswp__button--contest-vote-active"),this.isDisabled()&&(t+=" pswp__button--disabled"),t},this.resetTooltip=()=>{const t=this.mainRef.current;null!=t&&tooltipDefault.remove(t)},this.syncState=()=>{this.setState({button:this.buttonState()})},this.vote=()=>{if(this.isDisabled())return;const t=this.button();null!=t&&t.click()},this.state={button:this.buttonState(),isLoading:!1}}componentDidMount(){t.subscribe(`contest:vote:click.${this.eventId}`,this.loadingStart),t.subscribe(`contest:vote:end.${this.eventId}`,this.loadingEnd),this.props.pswp.listen("afterChange",this.syncState)}componentDidUpdate(){this.resetTooltip()}componentWillUnmount(){t.unsubscribe(`.${this.eventId}`)}render(){return i.createElement("button",{ref:this.mainRef,className:this.mainClass(),onClick:this.vote,title:this.buttonTitle()},i.createElement("span",{className:this.iconClass()}))}button(){if(null==this.props.pswp.currItem)return;const t=this.props.pswp.currItem.element.dataset.buttonId;return document.querySelector(`.js-contest-vote-button[data-button-id='${t}']`)}iconClass(){return this.state.isLoading?"fas fa-sync fa-spin":"fas fa-star"}}}).call(this,n("5wds"))},mwlt:function(t,e,n){"use strict";var i=n("EaLk"),s=n("cF9b"),r=n("f4vq"),o=n("/G9H"),a=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};let u=class extends o.Component{get unreadCount(){return r.a.dataStore.notificationStore.unreadStacks.getOrCreateType({objectType:"channel"}).total}render(){return o.createElement("span",{className:this.mainClass()},o.createElement("i",{className:"fas fa-comment-alt"}),o.createElement("span",{className:"notification-icon__count"},this.unreadCountDisplay()))}mainClass(){let t="notification-icon";return this.unreadCount>0&&(t+=" notification-icon--glow"),"mobile"===this.props.type&&(t+=" notification-icon--mobile"),t}unreadCountDisplay(){return r.a.notificationsWorker.hasData?osu.formatNumber(this.unreadCount):"..."}};a([i.e],u.prototype,"unreadCount",null),u=a([s.e],u),e.a=u},o5lo:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicWatchAjax=function(){function e(){this.shouldContinue=t(this.shouldContinue,this),this.loading=t(this.loading,this),this.fail=t(this.fail,this),this.done=t(this.done,this),this.abortAll=t(this.abortAll,this),i(document).on("ajax:before",".js-forum-topic-watch-ajax",this.shouldContinue),i(document).on("ajax:send",".js-forum-topic-watch-ajax",this.loading),i(document).on("ajax:error",".js-forum-topic-watch-ajax",this.fail),i(document).on("ajax:success",".js-forum-topic-watch-ajax",this.done),this.xhr=[],this.unknownState=!1}return e.prototype.abortAll=function(){var t,e;for(t=[];null!=(e=this.xhr.pop());)t.push(e.abort());return t},e.prototype.done=function(){return this.unknownState=!1},e.prototype.fail=function(t,e,n){var i;i=t.currentTarget,"abort"===n&&(i.dataset.skipAjaxErrorPopup="1"),i.classList.remove("js-forum-topic-watch-ajax--loading"),i.disabled=!1},e.prototype.loading=function(t,e){var n;this.unknownState=!0,this.abortAll(),this.xhr.push(e),LoadingOverlay.hide(),(n=t.currentTarget).dataset.skipAjaxErrorPopup="0",n.classList.add("js-forum-topic-watch-ajax--loading"),n.disabled=!0},e.prototype.shouldContinue=function(t){return this.unknownState||"1"!==t.currentTarget.dataset.forumTopicWatchAjaxIsActive},e}()}).call(window)},oPHq:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));var i=n("/G9H"),s=n("hc33");class r extends i.Component{constructor(){super(...arguments),this.state={postId:"",username:""},this.reportRef=i.createRef(),this.onClickReportButton=t=>{if(0!==t.button)return;const e=t.currentTarget.closest(".js-forum-post");if(null==e)return;const n=e.dataset.postId,i=e.dataset.postUsername;null!=n&&null!=i&&this.setState({postId:n,username:i},()=>{null!=this.reportRef.current&&this.reportRef.current.showForm()})}}componentDidMount(){t(document).on("click",".js-forum-post-report",this.onClickReportButton)}componentWillUnmount(){t(document).off("click",".js-forum-post-report",this.onClickReportButton)}render(){return i.createElement(s.a,{key:this.state.postId,ref:this.reportRef,reportableId:this.state.postId,reportableType:"forum_post",user:{username:this.state.username}})}}}).call(this,n("5wds"))},oWhP:function(t,e,n){n("5wds"),n("5wds");(function(){this.Blackout=function(){function t(){}return t.el=document.getElementsByClassName("js-blackout"),t.hide=function(){return t.toggle(!1)},t.show=function(){return t.toggle(!0)},t.toggle=function(e,n){var i;if(null!=(i=t.el[0]))return e&&null!=n||(n=null),i.style.opacity=n,Fade.toggle(i,e)},t}()}).call(window)},pAZq:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FancyGraph=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),i(window).on("resize",this.resize),i(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-fancy-graph"),e.prototype.initialize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0])._chart?t._chart:t._chart=new FancyChart(this.container[0])},e.prototype.resize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0]._chart)?t.resize():void 0},e}()}).call(window)},pVrk:function(t,e,n){n("5wds");var i=n("5wds");(function(){this.FormPlaceholderHide=function(){function t(){i(document).on("focus",".js-form-placeholder-hide",this.onFocus),i(document).on("blur",".js-form-placeholder-hide",this.onBlur)}return t.prototype.onBlur=function(t){if(t.target._origPlaceholder)return t.target.setAttribute("placeholder",t.target._origPlaceholder),t.target._origPlaceholder=null},t.prototype.onFocus=function(t){return t.target._origPlaceholder=t.target.getAttribute("placeholder"),t.target.setAttribute("placeholder","")},t}()}).call(window)},"pt+B":function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicTitle=function(){function e(){this.save=t(this.save,this),this.onKeyup=t(this.onKeyup,this),this.onInput=t(this.onInput,this),this.editShow=t(this.editShow,this),this.cancel=t(this.cancel,this),this.abort=t(this.abort,this),this.input=document.getElementsByClassName("js-forum-topic-title--input"),this.saveButton=document.getElementsByClassName("js-forum-topic-title--save"),this.title=document.getElementsByClassName("js-forum-topic-title--title"),this.toggleables=document.getElementsByClassName("js-forum-topic-title--toggleable"),addEventListener("turbolinks:before-cache",this.abort),i(document).on("click",".js-forum-topic-title--edit-start",this.editShow),i(document).on("click",".js-forum-topic-title--save",this.save),i(document).on("keyup",".js-forum-topic-title--input",this.onKeyup),i(document).on("click",".js-forum-topic-title--cancel",this.cancel),i(document).on("input",".js-forum-topic-title--input",this.onInput)}return e.prototype.abort=function(){var t;return null!=(t=this.xhr)?t.abort():void 0},e.prototype.cancel=function(){return this.abort(),i(this.toggleables).removeAttr("data-title-edit"),this.input[0].value=this.input[0].defaultValue},e.prototype.editShow=function(){return i(this.toggleables).attr("data-title-edit",1),this.input[0].selectionStart=this.input[0].value.length,this.input[0].focus()},e.prototype.onInput=function(){return this.saveButton[0].disabled=!osu.present(this.input[0].value)},e.prototype.onKeyup=function(t){switch(t.keyCode){case 13:return this.save();case 27:return this.cancel()}},e.prototype.save=function(){var t,e,n,s;if(e=(t=this.input[0]).value,null!=osu.presence(e))return e===t.defaultValue?this.cancel():(t.disabled=!0,this.saveButton[0].disabled=!0,this.abort(),this.xhr=i.ajax(t.dataset.url,{method:"PUT",data:(n={},n[""+t.name]=e,n)}).done((function(){return osu.reloadPage()})).fail((s=this,function(e){return t.disabled=!1,s.saveButton[0].disabled=!1,osu.emitAjaxError()(e)})))},e}()}).call(window)},qHJG:function(t,e,n){"use strict";(function(t){var i=n("0h6b"),s=n("cF9b"),r=n("txhI"),o=n("CwFt"),a=n("/G9H");let u=class extends a.Component{constructor(){super(...arguments),this.formRef=a.createRef(),this.searchPath=Object(i.route)("search",null,!1),this.state={open:!1},this.toggle=e=>{null!=currentUser.id&&(null!=e&&e.preventDefault(),this.isSearchPage?t(".js-search--input").focus():this.setState({open:!this.state.open}))}}get isSearchPage(){return document.location.pathname===this.searchPath}componentDidUpdate(t,e){var n;!e.open&&this.state.open&&(null===(n=this.formRef.current)||void 0===n||n.focus())}render(){let t="nav2__menu-link-main nav2__menu-link-main--search";return(this.state.open||document.location.pathname===Object(i.route)("search",null,!1))&&(t+=" u-section--bg-normal"),a.createElement(a.Fragment,null,a.createElement("a",{className:t,href:Object(i.route)("search"),onClick:this.toggle},a.createElement("span",{className:"fas fa-search"})),this.renderModal())}renderModal(){return!this.state.open||this.isSearchPage?null:a.createElement(r.a,{onClose:this.toggle,visible:!0},a.createElement(o.a,{ref:this.formRef,onClose:this.toggle,worker:this.props.worker}))}};u=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([s.e],u),e.a=u}).call(this,n("5wds"))},rEDz:function(t,e,n){n("5wds");var i=n("5wds");(function(){i(document).on("ajax:success",".js-edit-post-start",(function(t,e,n,s){var r;return i(t.target).trigger("ajax:complete",[s,n]),(r=i(t.target).parents(".js-forum-post-edit--container")).attr("data-original-post",r.html()).html(e).find("[name=body]").focus(),osu.pageChange()})),i(document).on("click",".js-edit-post-cancel",(function(t){var e;return t.preventDefault(),(e=i(t.target).parents(".js-forum-post-edit--container")).html(e.attr("data-original-post")).attr("data-original-post",null),osu.pageChange()})),i(document).on("ajax:success",".js-forum-post-edit",(function(t,e,n,s){return i(t.target).trigger("ajax:complete",[s,n]).parents(".js-forum-post").replaceWith(e),osu.pageChange()}))}).call(window)},sWOL:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.FormConfirmation=function(){function i(t){this.formError=t,this.onInput=n(this.onInput,this),this.boot=n(this.boot,this),e(document).on("input",".js-form-confirmation",this.onInput)}return i.prototype.boot=function(n){var i,s,r;if(null==n.formConfirmation)return s={},t.endsWith(n.name,"_confirmation")||t.endsWith(n.name,"_confirmation]")?(r=n.name.replace(/_confirmation(]?)$/,"$1"),s.confirmation=n,s.main=e(n).closest("form").find("[name='"+r+"']")[0]):(i=n.name.replace(/(]?)$/,"_confirmation$1"),s.main=n,s.confirmation=e(n).closest("form").find("[name='"+i+"']")[0]),s.main.formConfirmation=s,s.confirmation.formConfirmation=s},i.prototype.onInput=function(t){var e,n,i,s;return e=t.currentTarget,this.boot(e),s=(n=e.formConfirmation).main.value,i=n.confirmation.value,0===s.length||0===i.length?this.formError.setOneError(n.confirmation,[]):s===i?this.formError.setOneError(n.confirmation,[]):this.formError.setOneError(n.confirmation,[osu.trans("model_validation.wrong_confirmation")])},i}()}).call(window)}).call(this,n("Hs9Z"))},sebX:function(t,e){Lang._origGetPluralForm=Lang._getPluralForm,Lang._getPluralForm=(t,e)=>("pt-br"===e&&(e="pt"),Lang._origGetPluralForm(t,e))},snad:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){e(document).on("click",'a[href^="#"]',(function(e){var n,i,s,r;if("collapse"!==(i=e.currentTarget).dataset.toggle&&(n=i.href,""!==(r=decodeURIComponent(n.slice(n.indexOf("#")+1)))&&null!=(s=document.getElementById(r))))return e.preventDefault(),location.href!==n&&t.controller.advanceHistory(n),s.scrollIntoView()})),t.HttpRequest.prototype.requestLoaded=function(){return this.endRequest((t=this,function(){var e,n;return 200<=(e=t.xhr.status)&&e<300||401===(n=t.xhr.status)||403===n||404===n||500===n?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader("Turbolinks-Location")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}));var t},t.Controller.prototype.advanceHistory=function(e){var n,i;if(e!==document.location.href)return i=this.view.getSnapshot(),n=this.lastRenderedLocation,this.cache.put(n,i.clone()),this.lastRenderedLocation=t.Location.wrap(e),this.pushHistoryWithLocationAndRestorationIdentifier(e,t.uuid())},t.Snapshot.prototype.hasAnchor=function(){return!0},t.Controller.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&_exported.OsuUrlHelper.isInternal(t)&&_exported.OsuUrlHelper.isHTML(t)}}).call(window)}).call(this,n("dMdw"))},"t+h0":function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FormToggle=function(){function e(){this.sync=t(this.sync,this),this.onChange=t(this.onChange,this),addEventListener("turbolinks:load",this.sync),i(document).on("change",".js-form-toggle--input",this.onChange)}return e.prototype.onChange=function(t){return this.toggle(t.currentTarget)},e.prototype.sync=function(){var t,e,n,i,s;for(s=[],t=0,i=(n=document.getElementsByClassName("js-form-toggle--input")).length;t<i;t++)e=n[t],s.push(this.toggle(e));return s},e.prototype.toggle=function(t){var e,n;return n=t.dataset.formToggleId,e=t.checked?"Down":"Up",i(".js-form-toggle--form[data-form-toggle-id='"+n+"']").stop()["slide"+e]()},e}()}).call(window)},tTWz:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.GlobalDrag=function(){function e(){this.dragend=t(this.dragend,this),this.dragenter=t(this.dragenter,this),i(document).on("dragenter",this.dragenter),i(document).on("dragover",this.dragend)}return e.prototype.dragenter=function(){if(!this.dragging)return this.dragging=!0,i.publish("dragenterGlobal")},e.prototype.dragend=function(t){var e,n;if(this.dragging)return n=this,e=function(){return n.dragging=!1,i.publish("dragendGlobal")},Timeout.clear(this.dragendTimer),this.dragendTimer=Timeout.set(100,e)},e}()}).call(window)},tX9j:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));var i=n("/G9H"),s=n("XPyy");class r extends i.PureComponent{constructor(){super(...arguments),this.state={user:this.props.user},this.setUser=(t,e)=>{this.setState({user:e})}}componentDidMount(){t.subscribe("store-supporter-tag:update-user.user-card-store",this.setUser)}componentWillUnmount(){t.unsubscribe(".user-card-store")}render(){return i.createElement(s.a,{user:this.state.user})}}}).call(this,n("5wds"))},upGs:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Scale=function(){function e(){this.resizeAll=t(this.resizeAll,this),this.resize=t(this.resize,this),this.readParentSize=t(this.readParentSize,this),this.els=document.getElementsByClassName("js-scale"),i(document).on("turbolinks:load",this.resizeAll),i(window).on("resize",this.resizeAll)}return e.prototype.readParentSize=function(t){return t.parentSize=t.parentElement.getBoundingClientRect()},e.prototype.resize=function(t){var e,n,i;switch(n=t.parentSize,t.dataset.scale){case"ws":n.width/n.height>16/9?e=9/16*(i=n.width):i=16/9*(e=n.height)}if(null!=e&&null!=i)return t.style.height=e+"px",t.style.width=i+"px"},e.prototype.resizeAll=function(){var t,e,n,i,s,r,o,a;for(e=0,i=(r=this.els).length;e<i;e++)t=r[e],this.readParentSize(t);for(a=[],n=0,s=(o=this.els).length;n<s;n++)t=o[n],a.push(this.resize(t));return a},e}()}).call(window)},vqYE:function(t,e,n){n("5wds");var i=n("5wds");(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEditBlocklist=function(){function e(){this.toggle=t(this.toggle,this),this.updateBlockCount=t(this.updateBlockCount,this),i(document).on("click",this.jsClass,this.toggle),i.subscribe("user:update",this.updateBlockCount)}return e.prototype.element="block-list__content",e.prototype.jsClass=".js-account-edit-blocklist",e.prototype.updateBlockCount=function(){var t,e;if(null!=currentUser.id)return i(this.jsClass+"-count").text(osu.trans("users.blocks.blocked_count",{count:null!=(t=null!=(e=currentUser.blocks)?e.length:void 0)?t:0}))},e.prototype.toggle=function(t){var e;return t.preventDefault(),i("."+this.element).toggleClass("hidden"),e=i("."+this.element).hasClass("hidden")?osu.trans("common.buttons.show"):osu.trans("common.buttons.hide"),i(this.jsClass).text(e)},e}()}).call(window)},wuZa:function(t,e,n){(function(t){n("5wds");var e=n("5wds");(function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};this.CurrentUserObserver=function(){function i(){this.updateFollowUserMapping=n(this.updateFollowUserMapping,this),this.setData=n(this.setData,this),this.setCovers=n(this.setCovers,this),this.setAvatars=n(this.setAvatars,this),this.reinit=n(this.reinit,this),this.covers=document.getElementsByClassName("js-current-user-cover"),this.avatars=document.getElementsByClassName("js-current-user-avatar"),this.throttledReinit=t.throttle(this.reinit,100),e.subscribe("user:update",this.setData),e(document).on("turbolinks:load",this.reinit),e.subscribe("osu:page:change",this.throttledReinit),e.subscribe("user:followUserMapping:update",this.updateFollowUserMapping)}return i.prototype.reinit=function(){return this.setAvatars(),this.setCovers(),this.setSentryUser()},i.prototype.setAvatars=function(t){var e,n,i,s,r;for(null==t&&(t=this.avatars),null!=currentUser.id&&(e=osu.urlPresence(currentUser.avatar_url)),r=[],i=0,s=t.length;i<s;i++)n=t[i],r.push(n.style.backgroundImage=e);return r},i.prototype.setCovers=function(t){var e,n,i,s,r;for(null==t&&(t=this.covers),null!=currentUser.id&&(e=osu.urlPresence(currentUser.cover_url)),r=[],i=0,s=t.length;i<s;i++)n=t[i],r.push(n.style.backgroundImage=e);return r},i.prototype.setData=function(t,e){return window.currentUser=e,this.reinit()},i.prototype.setSentryUser=function(){if("undefined"!=typeof Sentry&&null!==Sentry)return Sentry.configureScope((function(t){return t.setUser({id:currentUser.id,username:currentUser.username})}))},i.prototype.updateFollowUserMapping=function(n,i){return i.following?currentUser.follow_user_mapping=currentUser.follow_user_mapping.concat(i.userId):currentUser.follow_user_mapping=t.without(currentUser.follow_user_mapping,i.userId),e.publish("user:followUserMapping:refresh")},i}()}).call(window)}).call(this,n("Hs9Z"))},xHv7:function(t,e,n){n("5wds");var i=n("5wds");(function(){this.FormClear=function(){function t(){i(document).on("ajax:success",".js-form-clear",this.clear)}return t.prototype.clear=function(t){return t.currentTarget.reset()},t}()}).call(window)},y0Iw:function(t,e,n){(function(t,e){n("5wds"),n("5wds");(function(){this.BeatmapDiscussionHelper=function(){function n(){}return n.DEFAULT_BEATMAP_ID="-",n.DEFAULT_MODE="timeline",n.DEFAULT_FILTER="total",n.MAX_MESSAGE_PREVIEW_LENGTH=100,n.MAX_LENGTH_TIMELINE=750,n.TIMESTAMP_REGEX=/\b(((\d{2,}):([0-5]\d)[:.](\d{3}))(\s\((?:\d+[,|])*\d+\))?)/,n.MODES=new Set(["events","general","generalAll","timeline","reviews"]),n.FILTERS=new Set(["deleted","hype","mapperNotes","mine","pending","praises","resolved","total"]),n.canModeratePosts=function(t){return null==t&&(t=currentUser),t.is_admin||t.is_moderator},n.discussionMode=function(t){return"review"===t.message_type?"reviews":null!=t.beatmap_id?null!=t.timestamp?"timeline":"general":"generalAll"},n.format=function(e,i){var s,r,o,a,u,l,c;for(null==i&&(i={}),r="beatmapset-discussion-message",e=(e=t.escape(e)).trim(),e=_exported.discussionLinkify(e),e=n.linkTimestamp(e,["beatmap-discussion-timestamp-decoration"]),(null==(u=i.newlines)||u)&&(e=e.split("\n").map((function(t){return t.trim()})).join("<br>").replace(/(?:<br>){2,}/g,"<br><br>")),s=r,o=0,a=(c=null!=(l=i.modifiers)?l:[]).length;o<a;o++)s+=" "+r+"--"+c[o];return"<div class='"+s+"'>"+e+"</div>"},n.formatTimestamp=function(e){var n,i,s;if(null!=e)return i=e%1e3,s=Math.floor(e/1e3)%60,n=Math.floor(e/1e3/60),t.padStart(n,2,0)+":"+t.padStart(s,2,0)+"."+t.padStart(i,3,0)},n.linkTimestamp=function(t,e){return null==e&&(e=[]),t.replace(/\b((\d{2}):(\d{2})[:.](\d{3})( \([\d,|]+\)|\b))/g,(function(t,n,i,s,r,o){return osu.link(_exported.OsuUrlHelper.openBeatmapEditor(i+":"+s+":"+r+(null!=o?o:"")),n,{classNames:e})}))},n.messageType={icon:{hype:"fas fa-bullhorn",mapperNote:"far fa-sticky-note",praise:"fas fa-heart",problem:"fas fa-exclamation-circle",review:"fas fa-tasks",suggestion:"far fa-circle"}},n.nearbyDiscussions=function(n,i){var s,r,o,a,u,l,c,h,d,p,f,m;if(null==i)return[];for(l={},a=0,u=n.length;a<u;a++)!(r=n[a]).timestamp||"suggestion"!==(c=r.message_type)&&"problem"!==c||(o=Math.abs(r.timestamp-i))>5e3||r.user_id===currentUser.id&&e(r.updated_at).diff(e(),"hour")>-24||(null==l[s=function(){switch(!1){case 0!==o:return"d0";case!(o<100):return"d100";case!(o<1e3):return"d1000";default:return"other"}}()]&&(l[s]=[]),l[s].push(r));return m=null!=(h=null!=(d=null!=(p=null!=(f=l.d0)?f:l.d100)?p:l.d1000)?d:l.other)?h:[],t.sortBy(m,"timestamp")},n.previewMessage=function(e){return e.length>n.MAX_MESSAGE_PREVIEW_LENGTH?t.chain(e).truncate({length:n.MAX_MESSAGE_PREVIEW_LENGTH}).escape().value():n.format(e,{newlines:!1})},n.stateFromDiscussion=function(t){var e;return null==t?{}:{discussionId:t.id,beatmapsetId:t.beatmapset_id,beatmapId:null!=(e=t.beatmap_id)?e:n.DEFAULT_BEATMAP_ID,mode:n.discussionMode(t)}},n.parseTimestamp=function(t){var e,i;return null==t?null:null!=(i=t.match(n.TIMESTAMP_REGEX))?1e3*(60*(e=i.slice(1).map((function(t){return parseInt(t,10)})))[2]+e[3])+e[4]:void 0},n.url=function(e,i){var s,r,o,a,u,l,c,h,d,p,f,m,g,v;return null==e&&(e={}),null==i&&(i=!1),o=(f=i?t.assign(n.urlParse(),e):e).beatmapsetId,r=f.beatmapId,s=f.beatmap,d=f.mode,h=f.filter,u=f.discussionId,c=f.discussions,a=f.discussion,v=f.user,p={},null!=s&&(o=s.beatmapset_id,r=s.id),p.beatmapset=o,p.mode=null!=d?d:n.DEFAULT_MODE,p.beatmap=null==r||"events"===(m=p.mode)||"generalAll"===m||"reviews"===m?n.DEFAULT_BEATMAP_ID:r,null!=h&&h!==n.DEFAULT_FILTER&&"events"!==p.mode&&(p.filter=h),null!=a&&(u=a.id),null!=u&&(null==a&&null!=c&&(a=t.find(c,{id:u})),null!=a&&(null!=a&&(l=n.stateFromDiscussion(a)),p.beatmapset=l.beatmapsetId,p.beatmap=l.beatmapId,p.mode=l.mode)),(g=new URL(laroute.route("beatmapsets.discussion",p))).hash=null!=u?g.hash="/"+u:"",null!=v?g.searchParams.set("user",v):g.searchParams.delete("user"),g.toString()},n.urlParse=function(e,i,s){var r,o,a,u,l,c,h,d,p,f,m;if(null==s&&(s={}),null==s.forceDiscussionId&&(s.forceDiscussionId=!1),(p=(m=new URL(null!=e?e:document.location.href)).pathname.split(/\/+/))[0],h=p[1],o=p[2],d=p[3],r=p[4],c=p[5],l=p[6],"beatmapsets"===h&&"discussion"===d)return o=parseInt(o,10),r=parseInt(r,10),f={beatmapsetId:isFinite(o)?o:void 0,beatmapId:isFinite(r)?r:void 0,mode:n.MODES.has(c)?c:n.DEFAULT_MODE,filter:n.FILTERS.has(l)?l:n.DEFAULT_FILTER,user:null!=m.searchParams.get("user")?parseInt(m.searchParams.get("user"),10):void 0},"/"===m.hash[1]&&(u=parseInt(m.hash.slice(2),10),isFinite(u)&&(null!=i?(a=t.find(i,{id:u}),t.assign(f,n.stateFromDiscussion(a))):s.forceDiscussionId&&(f.discussionId=u))),f},n.validMessageLength=function(t,e){return(null!=t?t.length:void 0)>0&&(!e||t.length<=n.MAX_LENGTH_TIMELINE)},n}()}).call(window)}).call(this,n("Hs9Z"),n("7EfK"))},"yP+D":function(t,e,n){(function(t,e){n("5wds");var i=n("5wds");(function(){var n={}.hasOwnProperty;this.osu={isIos:/iPad|iPhone|iPod/.test(navigator.platform),urlRegex:/(https?:\/\/((?:(?:[a-z0-9]\.|[a-z0-9][a-z0-9-]*[a-z0-9]\.)*[a-z][a-z0-9-]*[a-z0-9](?::\d+)?)(?:(?:(?:\/+(?:[a-z0-9$_\.\+!\*',;:@&=-]|%[0-9a-f]{2})*)*(?:\?(?:[a-z0-9$_\.\+!\*',;:@&=-]|%[0-9a-f]{2})*)?)?(?:#(?:[a-z0-9$_\.\+!\*',;:@&=\/?-]|%[0-9a-f]{2})*)?)?(?:[^\.,:\s])))/gi,bottomPage:function(){return 0===osu.bottomPageDistance()},bottomPageDistance:function(){var t,e,n;return(t=null!=(e=null!=(n=document.documentElement)?n:document.body.parent)?e:document.body).scrollHeight-t.scrollTop-t.clientHeight},classWithModifiers:function(t,e){var n,i,s,r;if(r=t,null!=e)for(n=0,i=e.length;n<i;n++)null!=(s=e[n])&&(r+=" "+t+"--"+s);return r},currentUserIsFriendsWith:function(e){return t.find(currentUser.friends,{target_id:e})},diffColour:function(t){return{"--diff":"var(--diff-"+(null!=t?t:"default")+")"}},groupColour:function(t){var e;return{"--group-colour":null!=(e=null!=t?t.colour:void 0)?e:"initial"}},setHash:function(t){var e;if(e=location.href.replace(/#.*/,""),(e+=t)!==location.href)return history.replaceState(history.state,null,e)},ajaxError:function(t){if(!osuCore.userLogin.showOnError(t)&&!osuCore.userVerification.showOnError(t))return osu.popup(osu.xhrErrorMessage(t),"danger")},emitAjaxError:function(t){return null==t&&(t=document.body),function(e,n,s){return i(t).trigger("ajax:error",[e,n,s])}},pageChange:function(){return Timeout.set(0,osu.pageChangeImmediate)},pageChangeImmediate:function(){return i.publish("osu:page:change")},parseJson:function(t,e){var n,i;if(null==e&&(e=!1),null!=(n=document.getElementById(t)))return i=JSON.parse(n.text),e&&n.remove(),i},storeJson:function(t,e){var n,i;return i=JSON.stringify(e),null==(n=document.getElementById(t))&&((n=document.createElement("script")).id=t,n.type="application/json",document.body.appendChild(n)),n.text=i},jsonClone:function(t){return JSON.parse(JSON.stringify(null!=t?t:null))},isInputElement:function(t){var e;return"INPUT"===(e=t.tagName)||"SELECT"===e||"TEXTAREA"===e||t.isContentEditable},isClickable:function(t){var e;return!(!osu.isInputElement(t)&&"A"!==(e=t.tagName)&&"BUTTON"!==e)||!!t.parentNode&&osu.isClickable(t.parentNode)},isDesktop:function(){return window.matchMedia("(min-width: 900px)").matches},isMobile:function(){return!osu.isDesktop()},focus:function(t){var e;return t=i(t)[0],osu.isIos?(e=t.style.fontSize,t.style.fontSize="16px",t.focus(),t.style.fontSize=e):t.focus()},src2x:function(t){return{src:t,srcSet:t+" 1x, "+_exported.make2x(t)+" 2x"}},link:function(e,n,i){var s;return null==i&&(i={}),i.unescape&&(e=t.unescape(e),n=t.unescape(n)),(s=document.createElement("a")).setAttribute("href",e),i.isRemote&&s.setAttribute("data-remote",!0),i.classNames&&(s.className=i.classNames.join(" ")),s.textContent=n,i.props&&t.each(i.props,(function(t,e){if(null!=t)return s.setAttribute(e,t)})),s.outerHTML},linkify:function(t,e){return null==e&&(e=!1),t.replace(osu.urlRegex,'<a href="$1" rel="nofollow noreferrer"'+(e?' target="_blank"':"")+">$2</a>")},timeago:function(t){var e;return(e=document.createElement("time")).classList.add("js-timeago"),e.setAttribute("datetime",t),e.textContent=t,e.outerHTML},formatBytes:function(t,e){var n,i;return null==e&&(e=2),i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],1e3,t<1e3?t+" B":(n=Math.floor(Math.log(t)/Math.log(1e3)),osu.formatNumber(t/Math.pow(1e3,n),e)+" "+i[n])},formatNumber:function(t,e,n,i){return null==t?null:(null==n&&(n={}),null!=e&&(n.minimumFractionDigits=e,n.maximumFractionDigits=e),t.toLocaleString(null!=i?i:currentLocale,n))},reloadPage:function(n){var s;return null==n&&(n=!0),i(document).off(".ujsHideLoadingOverlay"),e.clearCache(),s=t.isEmpty(window.reloadUrl)?location.href:window.reloadUrl,window.reloadUrl=null,osu.navigate(s,n,{action:"replace"})},urlPresence:function(t){return osu.present(t)?'url("'+String(t).replace(/"/g,"%22")+'")':null},navigate:function(t,n,i){var s,r;return s=null!=(r=(null!=i?i:{}).action)?r:"advance",n&&osu.keepScrollOnLoad(),e.visit(t,{action:s})},keepScrollOnLoad:function(){var t;return t=[window.pageXOffset,window.pageYOffset],i(document).one("turbolinks:load",(function(){return window.scrollTo(t[0],t[1])}))},popup:function(t,e){var n,s,r,o;return null==e&&(e="info"),s=i("#popup-container"),o=function(){return n.click()},(n=i(".popup-clone").clone()).addClass("alert-"+e+" popup-active").removeClass("popup-clone"),n.find(".popup-text").html(t),"warning"===e||"danger"===e?i("#overlay").off("click.close-alert").one("click.close-alert",o).fadeIn():Timeout.set(5e3,o),"function"==typeof(r=document.activeElement).blur&&r.blur(),n.appendTo(s).fadeIn()},popupShowing:function(){return i("#overlay").is(":visible")},presence:function(t){return osu.present(t)?t:null},present:function(t){return null!=t&&""!==t},promisify:function(t){return new Promise((function(e,n){return t.done(e).fail(n)}))},trans:function(t,e,n){return null==e&&(e={}),osu.transExists(t,n)||(n=fallbackLocale),Lang.get(t,e,n)},transArray:function(e,n){switch(null==n&&(n="common.array_and"),e.length){case 0:return"";case 1:return""+e[0];case 2:return e.join(osu.trans(n+".two_words_connector"));default:return""+e.slice(0,-1).join(osu.trans(n+".words_connector"))+osu.trans(n+".last_word_connector")+t.last(e)}},transChoice:function(t,e,n,i){var s,r;return null==n&&(n={}),null==i&&(i=currentLocale),(s=i===fallbackLocale)||osu.transExists(t,i)?(n.count_delimited=osu.formatNumber(e,null,null,i),r=Lang.choice(t,e,n,i),s||null!=r?r:(delete n.count,osu.transChoice(t,e,n,fallbackLocale))):osu.transChoice(t,e,n,fallbackLocale)},transExists:function(t,e){var n;return n=Lang.get(t,null,e),osu.present(n)&&n!==t},uuid:function(){return e.uuid()},updateQueryString:function(t,e){var i,s,r;for(i in s=new URL(null!=t?t:window.location.href,document.location.origin),e)n.call(e,i)&&(null!=(r=e[i])?s.searchParams.set(i,r):s.searchParams.delete(i));return s.href},xhrErrorMessage:function(t){var e,i,s,r,o,a,u,l,c;if(null!=(c=null!=t&&null!=(a=t.responseJSON)?a.validation_error:void 0)){for(e in i=[],c)n.call(c,e)&&(r=c[e],i=i.concat(r));o=i.join(", ")+"."}return null==o&&(o=null!=t&&null!=(u=t.responseJSON)?u.error:void 0),null==o&&(o=null!=t&&null!=(l=t.responseJSON)?l.message:void 0),null!=o&&""!==o||(s="errors.codes.http-"+(null!=t?t.status:void 0),(o=osu.trans(s))===s&&(o=osu.trans("errors.unknown"))),o}}}).call(window)}).call(this,n("Hs9Z"),n("dMdw"))},zaxE:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var i,s=n("/G9H"),r=n("I8Ok"),o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;s.createElement,i="countdown-timer";var u=function(e){function n(e){var i;this.render=o(this.render,this),this.updateTimer=o(this.updateTimer,this),n.__super__.constructor.call(this,e),i=t(this.props.deadline),this.state={deadline:i,diff:Math.max(i.diff(),0)}}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.componentDidMount=function(){return this.timer=setInterval(this.updateTimer,1e3)},n.prototype.componentWillUnmount=function(){return clearInterval(this.timer)},n.prototype.updateTimer=function(){var t;return 0===(t=Math.max(this.state.deadline.diff(),0))&&clearInterval(this.timer),this.setState({diff:t})},n.prototype.render=function(){var t,e,n,s;return t=this.state.diff/1e3,n={days:Math.floor(t/86400),hours:Math.floor(t/3600%24),minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)},Object(r.div)({className:i},Object(r.div)({className:i+"__header"},osu.trans("common.time.remaining")+":"),function(){var t;for(e in t=[],n)s=n[e],t.push(Object(r.div)({key:e,className:i+"__field"},Object(r.div)({className:i+"__digit"},s<10?"0"+s:s),Object(r.div)({className:i+"__label"},osu.trans("common.countdown."+e))));return t}())},n}(s.Component)}).call(this,n("7EfK"))},zzf1:function(t,e,n){}},[[0,1,2,0]]]);
//# sourceMappingURL=app.fd6ade3d.js.map